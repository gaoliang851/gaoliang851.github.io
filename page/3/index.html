<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="人类的本能是胆怯，但人类的本质是不甘心">
<meta property="og:type" content="website">
<meta property="og:title" content="Dev.Gao的学习笔记">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="Dev.Gao的学习笔记">
<meta property="og:description" content="人类的本能是胆怯，但人类的本质是不甘心">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Dev.Gao">
<meta property="article:tag" content="iOS,Android,Java">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Dev.Gao的学习笔记</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Dev.Gao的学习笔记</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">记录成长</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/09/Swift5%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E6%B3%9B%E5%9E%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dev.Gao">
      <meta itemprop="description" content="人类的本能是胆怯，但人类的本质是不甘心">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dev.Gao的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/09/Swift5%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E6%B3%9B%E5%9E%8B/" class="post-title-link" itemprop="url">Swift5学习笔记之泛型</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-09-09 11:15:53" itemprop="dateCreated datePublished" datetime="2019-09-09T11:15:53+08:00">2019-09-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/Swift/" itemprop="url" rel="index"><span itemprop="name">Swift</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="在函数中使用泛型"><a href="#在函数中使用泛型" class="headerlink" title="在函数中使用泛型"></a>在函数中使用泛型</h2><ul>
<li><p>泛型可以将类型参数化，提高代码复用率，减少代码量。在函数中使用泛型，可以在函数名上加上<code>&lt;T,...&gt;</code>。当然这里的<code>T</code>可以自定义。参数的类型使用<code>T</code>代替。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swapValues</span>&lt;T&gt;<span class="params">(<span class="number">_</span> a: <span class="keyword">inout</span> T,<span class="number">_</span> b: <span class="keyword">inout</span> T)</span></span> &#123;</span><br><span class="line">    (a,b) = (b,a)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> n1 = <span class="number">5</span></span><br><span class="line"><span class="keyword">var</span> n2 = <span class="number">6</span></span><br><span class="line">swapValues(&amp;n1, &amp;n2)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;n1:\(n1),n2:\(n2)&quot;</span>) <span class="comment">//n1:6,n2:5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s1 = <span class="string">&quot;abc&quot;</span></span><br><span class="line"><span class="keyword">var</span> s2 = <span class="string">&quot;test&quot;</span></span><br><span class="line">swapValues(&amp;s1, &amp;s2)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;s1:\(s1),s2:\(s2)&quot;</span>) <span class="comment">//s1:test,s2:abc</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>函数使用泛型时，也可以指定多种类型，例如：<code>test&lt;T1,T2&gt;</code>。并且将函数赋值给另外一个参数时，需要指定类型。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">mutilType</span>&lt;T1,T2&gt;<span class="params">(<span class="number">_</span> t1: T1, <span class="number">_</span> t2: T2)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> fn: (<span class="type">Int</span>, <span class="type">Double</span>) -&gt; <span class="type">Int</span> = mutilType</span><br><span class="line">fn(<span class="number">10</span>,<span class="number">0.5</span>)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="在类、结构体或枚举中使用泛型"><a href="#在类、结构体或枚举中使用泛型" class="headerlink" title="在类、结构体或枚举中使用泛型"></a>在类、结构体或枚举中使用泛型</h2><ul>
<li><p>在类、结构体或枚举中使用泛型，需要在类名，结构体或枚举名后加泛型例如：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stack</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> elements = [<span class="type">E</span>]()</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">push</span><span class="params">(<span class="number">_</span> element: E)</span></span>&#123; elements.append(element) &#125;</span><br><span class="line">       <span class="function"><span class="keyword">func</span> <span class="title">pop</span><span class="params">()</span></span> -&gt; <span class="type">E</span> &#123; elements.removeLast() &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">top</span><span class="params">()</span></span> -&gt; <span class="type">E</span> &#123; elements.last! &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">size</span><span class="params">()</span></span> -&gt; <span class="type">Int</span> &#123; elements.<span class="built_in">count</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//初始化时需要指定类型</span></span><br><span class="line"><span class="keyword">var</span> intStack = <span class="type">Stack</span>&lt;<span class="type">Int</span>&gt;()</span><br><span class="line"><span class="keyword">var</span> anyStack = <span class="type">Stack</span>&lt;<span class="type">Any</span>&gt;()</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Stack</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> elements = [<span class="type">E</span>]()</span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">push</span><span class="params">(<span class="number">_</span> element: E)</span></span>&#123; elements.append(element) &#125;</span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">pop</span><span class="params">()</span></span> -&gt; <span class="type">E</span> &#123; elements.removeLast() &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">top</span><span class="params">()</span></span> -&gt; <span class="type">E</span> &#123; elements.last! &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">size</span><span class="params">()</span></span> -&gt; <span class="type">Int</span> &#123; elements.<span class="built_in">count</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Score</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">case</span> point(<span class="type">T</span>)</span><br><span class="line">    <span class="keyword">case</span> grade(<span class="type">String</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在继承时，也要使用泛型：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubStack</span>&lt;<span class="title">E</span>&gt;: <span class="title">Stack</span>&lt;<span class="title">E</span>&gt; </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>对于要不要指定泛型的类型，一个基本原则就是<strong>如果编译器推断出泛型的类型就不用显式的写出，否则就要指定。</strong></p>
<p>譬如：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//对于如下代码，初始化时编译器无法推断出T的类型，就需要显式指明 </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stack</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> elements = [<span class="type">E</span>]()</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">push</span><span class="params">(<span class="number">_</span> element: E)</span></span>&#123; elements.append(element) &#125;</span><br><span class="line">       <span class="function"><span class="keyword">func</span> <span class="title">pop</span><span class="params">()</span></span> -&gt; <span class="type">E</span> &#123; elements.removeLast() &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">top</span><span class="params">()</span></span> -&gt; <span class="type">E</span> &#123; elements.last! &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">size</span><span class="params">()</span></span> -&gt; <span class="type">Int</span> &#123; elements.<span class="built_in">count</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> stack = <span class="type">Stack</span>&lt;<span class="type">Int</span>&gt;()</span><br><span class="line"><span class="keyword">var</span> anyStack = <span class="type">Stack</span>&lt;<span class="type">Any</span>&gt;()</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果在某些方法中可以使编译器推断出类型,比如有构造器中使用T，编译器就可以匹配出T的具体类型</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stack</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> elements = [<span class="type">E</span>]()</span><br><span class="line">      <span class="keyword">init</span>(firstElement: <span class="type">E</span>) &#123;</span><br><span class="line">            elements.append(firstElement)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">push</span><span class="params">(<span class="number">_</span> element: E)</span></span>&#123; elements.append(element) &#125;</span><br><span class="line">       <span class="function"><span class="keyword">func</span> <span class="title">pop</span><span class="params">()</span></span> -&gt; <span class="type">E</span> &#123; elements.removeLast() &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">top</span><span class="params">()</span></span> -&gt; <span class="type">E</span> &#123; elements.last! &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">size</span><span class="params">()</span></span> -&gt; <span class="type">Int</span> &#123; elements.<span class="built_in">count</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> stack = <span class="type">Stack</span>(firstElements: <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Score</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">case</span> point(<span class="type">T</span>)</span><br><span class="line">    <span class="keyword">case</span> grade(<span class="type">String</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//对于枚举来说，也是同样的原则</span></span><br><span class="line"><span class="keyword">let</span> score0 = <span class="type">Score</span>&lt;<span class="type">Int</span>&gt;.point(<span class="number">100</span>)</span><br><span class="line"><span class="keyword">let</span> score1 = <span class="type">Score</span>.point(<span class="number">100</span>)</span><br><span class="line"><span class="keyword">let</span> score2 = <span class="type">Score</span>.point(<span class="number">99.5</span>)</span><br><span class="line"><span class="comment">//报错无法匹配出泛型的类型，应该使用 Score&lt;Int&gt;.grade(&quot;11&quot;)</span></span><br><span class="line"><span class="keyword">let</span> score3 = <span class="type">Score</span>.grade(<span class="string">&quot;11&quot;</span>)</span><br><span class="line"><span class="keyword">let</span> score4 = <span class="type">Score</span>&lt;<span class="type">Int</span>&gt;.grade(<span class="string">&quot;abc&quot;</span>)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="协议中使用泛型"><a href="#协议中使用泛型" class="headerlink" title="协议中使用泛型"></a>协议中使用泛型</h2><p>在协议中使用泛型可以使用关联类型( Associated Type )</p>
<p>关联类型的作用：给协议中用的类型定义一个占位符。协议中可以拥有多个关联类型。在遵循此协议的类型中使用<code>typealias</code>指定类型。<strong>如果编译器通过类型内的方法中推断出泛型的类型，<code>typealias</code>可以省略。</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Stackable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">Element</span> <span class="comment">// 关联类型</span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">push</span><span class="params">(<span class="number">_</span> element: Element)</span></span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">pop</span><span class="params">()</span></span> -&gt; <span class="type">Element</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">top</span><span class="params">()</span></span> -&gt; <span class="type">Element</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">size</span><span class="params">()</span></span> -&gt; <span class="type">Int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StringStack</span>: <span class="title">Stackable</span> </span>&#123;</span><br><span class="line">        <span class="comment">//编译器可以通过其他方法中推断出Element的类型，typealias可以省略</span></span><br><span class="line">      <span class="comment">//typealias Element = String</span></span><br><span class="line">      <span class="keyword">var</span> elements = [<span class="type">String</span>]()</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">push</span><span class="params">(<span class="number">_</span> element: String)</span></span> &#123; elements.append(element) &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">pop</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123; elements.removeLast() &#125;</span><br><span class="line">       <span class="function"><span class="keyword">func</span> <span class="title">top</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123; elements.last! &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">size</span><span class="params">()</span></span> -&gt; <span class="type">Int</span> &#123; elements.<span class="built_in">count</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//遵循协议的类型中也可以继续使用泛型</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stack</span>&lt;<span class="title">E</span>&gt;: <span class="title">Stackable</span> </span>&#123;</span><br><span class="line">     <span class="comment">//可以省略</span></span><br><span class="line">        <span class="comment">//typealias Element = E</span></span><br><span class="line">        <span class="keyword">var</span> elementes = [<span class="type">E</span>]()</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">push</span><span class="params">(<span class="number">_</span> element: E)</span></span> &#123; elementes.append(element) &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">pop</span><span class="params">()</span></span> -&gt; <span class="type">E</span> &#123; elementes.removeLast() &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">top</span><span class="params">()</span></span> -&gt; <span class="type">E</span> &#123; elementes.last! &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">size</span><span class="params">()</span></span> -&gt; <span class="type">Int</span> &#123; elementes.<span class="built_in">count</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="类型约束"><a href="#类型约束" class="headerlink" title="类型约束"></a>类型约束</h2><ul>
<li><p>可以对泛型的类型进行约束，例如：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Runnable</span> </span>&#123; &#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123; &#125;</span><br><span class="line"><span class="comment">//T的类型必须是 遵循Runable协议，Person类型或Person子类的类型</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">swapValues</span>&lt;T: Person &amp; Runnable&gt;<span class="params">(<span class="number">_</span> a: <span class="keyword">inout</span> T,<span class="number">_</span> b: <span class="keyword">inout</span> T)</span></span> &#123;</span><br><span class="line">        (a,b) = (b,a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在协议中使用泛型的场景中，使用类型约束</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Arrayable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">Element</span>: <span class="type">Equatable</span> <span class="comment">//关联类型Element遵守Equatable协议</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Array</span>&lt;<span class="title">E</span>: <span class="title">Equatable</span>&gt; : <span class="title">Arrayable</span> </span>&#123;</span><br><span class="line">      <span class="comment">//遵循Arrayable协议，并指定泛型E为关联类型。</span></span><br><span class="line">      <span class="comment">//为了避免出错泛型E也要和关联类型有相同的类型约束 ( &lt;E: Equatable&gt;)</span></span><br><span class="line">    <span class="keyword">typealias</span> <span class="type">Element</span> = <span class="type">E</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用<code>where</code>增加类型约束。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//指定了两个泛型，S1(遵循协议Arrayable)、S2(遵循协议Arrayable),</span></span><br><span class="line"><span class="comment">// where指定了类型约束的条件</span></span><br><span class="line"><span class="comment">// S1的关联类型 等于 S2的关联类型，并且 S1的关联类型遵循协议Hashable</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">equal</span>&lt;S1: Arrayable,S2: Arrayable&gt;<span class="params">(<span class="number">_</span> s1: S1, <span class="number">_</span> s2:S2)</span></span> -&gt; <span class="type">Bool</span></span><br><span class="line">        <span class="keyword">where</span> <span class="type">S1</span>.<span class="type">Element</span> == <span class="type">S2</span>.<span class="type">Element</span>, <span class="type">S1</span>.<span class="type">Element</span>: <span class="type">Hashable</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> stack1 = <span class="type">Array</span>&lt;<span class="type">Int</span>&gt;()</span><br><span class="line"><span class="keyword">var</span> stack2 = <span class="type">Array</span>&lt;<span class="type">String</span>&gt;()</span><br><span class="line"><span class="built_in">equal</span>(stack1,stack2) <span class="comment">//报错，function &#x27;equal&#x27; requires the types &#x27;Array&lt;Int&gt;.Element&#x27; (aka &#x27;Int&#x27;) and &#x27;Array&lt;String&gt;.Element&#x27; (aka &#x27;String&#x27;) be equivalent</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="不透明类型"><a href="#不透明类型" class="headerlink" title="不透明类型"></a>不透明类型</h2><p>对于某个函数要求返回遵守某个协议的类型，如果协议中不含有泛型或<code>Self</code>，函数是可以返回不同类类型的值。例如：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Runable</span> </span>&#123; &#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>: <span class="title">Runnable</span> </span>&#123; &#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span>: <span class="title">Runnable</span> </span>&#123; &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">get</span><span class="params">(<span class="number">_</span> type: Int)</span></span> -&gt; <span class="type">Runnable</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> type == <span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Person</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">Car</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是如果协议中使用泛型或<code>Self</code>，这是编译不通过的。因为在实现该协议的类型中，最终确定的泛型的类型可能是不一样的，所以就因此造成崩溃。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Runable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">Speed</span></span><br><span class="line">    <span class="keyword">var</span> speed: <span class="type">Speed</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>: <span class="title">Runable</span> </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> speed: <span class="type">Double</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0.0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span>: <span class="title">Runable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> speed: <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">get</span><span class="params">(<span class="number">_</span> type: Int)</span></span> -&gt; <span class="type">Runable</span> &#123; <span class="comment">//Protocol &#x27;Runable&#x27; can only be used as a generic constraint because it has Self or associated type requirements</span></span><br><span class="line">        <span class="keyword">if</span> type == <span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Person</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">Car</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>解决方案有两个：方案1：使用泛型。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">get</span>&lt;T: Runable&gt;<span class="params">(<span class="number">_</span> type: Int)</span></span> -&gt; <span class="type">T</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> type == <span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="type">Person</span>() <span class="keyword">as</span>! <span class="type">T</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">Car</span>() <span class="keyword">as</span>! <span class="type">T</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> r1: <span class="type">Person</span> = <span class="keyword">get</span>(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">var</span> r2: <span class="type">Car</span> = <span class="keyword">get</span>(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<p>方案2：使用<code>some</code>关键字来声明一个不透明类型。<code>some</code>关键字限制了只能返回一个参数类型。<code>some</code>关键字的一个作用就是隐藏返回值的真实类型。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Runable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">Speed</span></span><br><span class="line">    <span class="keyword">var</span> speed: <span class="type">Speed</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>: <span class="title">Runable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> speed: <span class="type">Double</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="number">0.0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span>: <span class="title">Runable</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> speed: <span class="type">Int</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">get</span><span class="params">(<span class="number">_</span> type: Int)</span></span> -&gt; some <span class="type">Runable</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Car</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>some</code>除了用在返回值类型上，一般还可以用在属性类型上</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">RunProtocol</span> </span>&#123;</span><br><span class="line">    <span class="keyword">associatedtype</span> <span class="type">Speed</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> :<span class="title">RunProtocol</span> </span>&#123;</span><br><span class="line">    <span class="keyword">typealias</span> <span class="type">Speed</span> = <span class="type">Double</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PersonSignle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> pet: some <span class="type">RunProtocol</span> &#123;</span><br><span class="line">        <span class="type">Dog</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="可选项的本质"><a href="#可选项的本质" class="headerlink" title="可选项的本质"></a>可选项的本质</h2><p>可选项的本质就是<code>enmu</code>类型（使用泛型）。</p>
<p><code>Swift</code>中对于可选项的实现：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">Optional</span>&lt;<span class="title">Wrapped</span>&gt; : <span class="title">ExpressibleByNilLiteral</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">case</span> some(<span class="type">Wrapped</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>(<span class="number">_</span> some: <span class="type">Wrapped</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>从源码中可以看出：可选项的枚举有两个<code>case</code>。其中<code>none</code>就是<code>nil</code>。而另外一个case：<code>some</code>是一个<code>Wrapperd</code>类型的关联值。例如：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> age: <span class="type">Int?</span> = <span class="number">10</span></span><br><span class="line"><span class="keyword">var</span> age0: <span class="type">Optional</span>&lt;<span class="type">Int</span>&gt; = <span class="type">Optional</span>&lt;<span class="type">Int</span>&gt;.some(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">var</span> age1: <span class="type">Optional</span> = .some(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">var</span> age2 = <span class="type">Optional</span>.some(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">var</span> age3 = <span class="type">Optional</span>(<span class="number">10</span>)</span><br><span class="line">age = <span class="literal">nil</span></span><br><span class="line">age3 = .<span class="keyword">none</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> age4: <span class="type">Int?</span> = <span class="literal">nil</span></span><br><span class="line"><span class="keyword">var</span> age5 = <span class="type">Optional</span>&lt;<span class="type">Int</span>&gt;.<span class="keyword">none</span> <span class="comment">//这里必须要指明类型，否则编译器推断不出</span></span><br><span class="line"><span class="keyword">var</span> age6: <span class="type">Optional</span>&lt;<span class="type">Int</span>&gt; = .<span class="keyword">none</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> age7: <span class="type">Int?</span> = .<span class="keyword">none</span></span><br><span class="line">age7 = <span class="number">10</span></span><br><span class="line">age7 = .some(<span class="number">20</span>)</span><br><span class="line">age7 = <span class="literal">nil</span></span><br></pre></td></tr></table></figure>

<p>因为可选项本质上就是枚举，也可以使用<code>switch</code>遍历操作：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> age: <span class="type">Int?</span> = <span class="number">10</span></span><br><span class="line"><span class="keyword">switch</span> age &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">let</span> v?: <span class="comment">//注意这里要加&quot;?&quot;,否则就变成无条件可选项绑定了</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;some:\(v)&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="literal">nil</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;none&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> age &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> .some(v):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;some:\(v)&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="literal">nil</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;nil&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>对于上述代码中：<code>case let v?:</code>,这里的<code>?</code>必不可少。因为<code>case let v：</code>就变成无条件绑定了，无论<code>age</code>的值是啥都会赋值给<code>v</code>。</strong></p>
<p>绑定通常会附加条件，例如：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//修改前</span></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">10</span></span><br><span class="line"><span class="keyword">switch</span> age &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> a:</span><br><span class="line">    <span class="built_in">print</span>(a)</span><br><span class="line"><span class="keyword">default</span>: <span class="comment">//编译器提示：Default will never be executed</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;default&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//修改后</span></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">10</span></span><br><span class="line"><span class="keyword">switch</span> age &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">let</span> a <span class="keyword">where</span> a &gt; <span class="number">20</span>:</span><br><span class="line">    <span class="built_in">print</span>(a)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;default&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对于多个可选项包装(<code>??</code>)的情况，则是<code>Optional</code>多层包装。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> age_: <span class="type">Int?</span> = <span class="number">10</span></span><br><span class="line"><span class="keyword">var</span> age: <span class="type">Int?</span>? = age_</span><br><span class="line">age = <span class="literal">nil</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> age0 = <span class="type">Optional</span>.some(<span class="type">Optional</span>.some(<span class="number">10</span>))</span><br><span class="line">age0 = .<span class="keyword">none</span></span><br><span class="line"><span class="keyword">var</span> age1: <span class="type">Optional</span>&lt;<span class="type">Optional</span>&gt; = .some(.some(<span class="number">10</span>))</span><br><span class="line">age1 = .<span class="keyword">none</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> age2: <span class="type">Int?</span>? = <span class="number">10</span></span><br><span class="line"><span class="keyword">var</span> age3: <span class="type">Optional</span>&lt;<span class="type">Optional</span>&gt; = <span class="number">10</span></span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/08/Swift5-1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dev.Gao">
      <meta itemprop="description" content="人类的本能是胆怯，但人类的本质是不甘心">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dev.Gao的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/08/Swift5-1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/" class="post-title-link" itemprop="url">Swift5学习笔记之错误处理</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-09-08 11:15:53" itemprop="dateCreated datePublished" datetime="2019-09-08T11:15:53+08:00">2019-09-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/Swift/" itemprop="url" rel="index"><span itemprop="name">Swift</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="自定义错误"><a href="#自定义错误" class="headerlink" title="自定义错误"></a>自定义错误</h2><ul>
<li><p><code>Swift</code>中可以通过**<code>Error</code>协议**自定义运行时的错误信息</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">SomeError</span> : <span class="title">Error</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> illegalArg(<span class="type">String</span>)</span><br><span class="line">    <span class="keyword">case</span> outOfBounds(<span class="type">Int</span>,<span class="type">Int</span>)</span><br><span class="line">    <span class="keyword">case</span> outOfMemory</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MyError</span>: <span class="title">Error</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> msg : <span class="type">String</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DIYError</span>: <span class="title">Error</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> msg: <span class="type">String</span></span><br><span class="line">    <span class="keyword">init</span>(msg: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.msg = msg</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>函数内部通过<code>throw</code>抛出自定义<code>Error</code>，可能会抛出<code>Error</code>的函数必须加上<code>throws</code>声明</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">divide</span><span class="params">(<span class="number">_</span> num1: Int, <span class="number">_</span> num2: Int)</span></span> <span class="keyword">throws</span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> num2 == <span class="number">0</span> &#123;</span><br><span class="line"><span class="comment">//      throw SomeError.illegalArg(&quot;0不能作为除数&quot;)</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="type">DIYError</span>(msg: <span class="string">&quot;0不能作为除数&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> num1 / num2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>需要使用<code>try</code>调用可能会抛出<code>Error</code>的函数。这里的<code>try</code>仅仅是尝试调用该函数，并没有处理可能抛出的错误。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> result = <span class="keyword">try</span> divide(<span class="number">2</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="do-catch捕捉Error"><a href="#do-catch捕捉Error" class="headerlink" title="do-catch捕捉Error"></a><code>do-catch</code>捕捉Error</h2><p>可以使用**<code>do-catch</code>**捕捉<code>Error</code>。抛出<code>Error</code>后，<code>try</code>下一句直到作用域结束的代码都将停止运行</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;1&quot;</span>)</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;2&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="keyword">try</span> divide(<span class="number">20</span>, <span class="number">0</span>))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;3&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">catch</span> <span class="keyword">let</span> <span class="type">SomeError</span>.illegalArg(msg) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;参数异常：&quot;</span>,msg)</span><br><span class="line">    &#125; <span class="keyword">catch</span> <span class="keyword">let</span> <span class="type">SomeError</span>.outOfBounds(size, index) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;下标越界：&quot;</span>,<span class="string">&quot;size=\(size),index=\(index)&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">catch</span> <span class="type">SomeError</span>.outOfMemory &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;内存溢出&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;其他错误&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;4&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test()</span><br><span class="line"><span class="comment">//1</span></span><br><span class="line"><span class="comment">//2</span></span><br><span class="line"><span class="comment">//参数异常： 0不能作为除数</span></span><br><span class="line"><span class="comment">//4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//另外一种写法</span></span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="keyword">try</span> divide(<span class="number">20</span>, <span class="number">0</span>)</span><br><span class="line">  <span class="built_in">print</span>(result)</span><br><span class="line">&#125; <span class="keyword">catch</span> <span class="keyword">let</span> error &#123;</span><br><span class="line">  <span class="keyword">switch</span> error &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">let</span> <span class="type">SomeError</span>.illegalArg(msg):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;参数错误：&quot;</span>,msg)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;其他错误&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="处理Error"><a href="#处理Error" class="headerlink" title="处理Error"></a>处理Error</h2><p>处理<code>Error</code>的2种方式</p>
<ol>
<li>通过<code>do-catch</code>捕捉<code>Error</code></li>
<li>不捕捉<code>Error</code>，在当前函数增加<code>throws</code>声明，<code>Error</code>将自动抛给上层函数。如果最顶层函数(<code>main</code>函数)依旧没有捕捉<code>Error</code>，那么程序将终止。</li>
</ol>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testHandleError</span><span class="params">()</span></span> <span class="keyword">throws</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="keyword">try</span> divide(<span class="number">10</span>,<span class="number">0</span>))</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">2</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> testHandleError()</span><br><span class="line"><span class="comment">//1</span></span><br><span class="line"><span class="comment">//Fatal error: Error raised at top level:</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>do-catch</code>使用<code>is</code></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testHandleErroris</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="keyword">try</span> divide(<span class="number">20</span>, <span class="number">0</span>))</span><br><span class="line">    &#125; <span class="keyword">catch</span> <span class="keyword">is</span> <span class="type">SomeError</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;SomeError&quot;</span>)</span><br><span class="line">    &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;other Error&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//对于如果 do-catch 对于Error没有处理完全，编译是会报错的，函数依旧要加上 throws</span></span><br><span class="line"><span class="comment">//如：下述代码只捕捉了 SomeError类型的 Error</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testHandleErroris</span><span class="params">()</span></span> <span class="keyword">throws</span> &#123;</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="keyword">try</span> divide(<span class="number">20</span>, <span class="number">0</span>))</span><br><span class="line">    &#125; <span class="keyword">catch</span> <span class="keyword">is</span> <span class="type">SomeError</span> &#123;<span class="comment">////如果抛出其他类型的错误，并不会捕捉，还是会直接向上抛</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;SomeError&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>do-catch</code>使用<code>as</code></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testHandleErrorAs</span><span class="params">()</span></span> <span class="keyword">throws</span> &#123; <span class="comment">//只捕捉了SomeError类型的错误，所以还要使用 throws</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="number">2</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="keyword">try</span> divide(<span class="number">20</span>, <span class="number">0</span>))</span><br><span class="line">        <span class="built_in">print</span>(<span class="number">3</span>)</span><br><span class="line">    &#125; <span class="keyword">catch</span> <span class="keyword">let</span> error <span class="keyword">as</span> <span class="type">SomeError</span> &#123; <span class="comment">//如果抛出其他类型的错误，并不会捕捉，还是会直接向上抛</span></span><br><span class="line">        <span class="built_in">print</span>(error)</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="comment">//如果要对抛出的Error全部处理，参考上面代码</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">4</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> testHandleErrorAs()</span><br><span class="line"><span class="comment">//1</span></span><br><span class="line"><span class="comment">//2</span></span><br><span class="line"><span class="comment">//illegalArg(&quot;0不能作为除数&quot;)</span></span><br><span class="line"><span class="comment">//4</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="不处理Error"><a href="#不处理Error" class="headerlink" title="不处理Error"></a>不处理<code>Error</code></h2><p>可以使用<code>try?</code>和<code>try!</code>调用可能会抛出的<code>Error</code>的函数，这样就不用处理<code>Error</code></p>
<ul>
<li><p><code>try?</code>会获得原函数结果的可选项包装类型，当然如果遇到错误抛出，结果是<code>nil</code>,但是程序并不会崩溃</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> result1 = <span class="keyword">try</span>? divide(<span class="number">20</span>, <span class="number">10</span>) <span class="comment">//Optional(2), Int?</span></span><br><span class="line"><span class="keyword">var</span> result2 = <span class="keyword">try</span>? divide(<span class="number">20</span>, <span class="number">0</span>) <span class="comment">// nil，并不会崩溃</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>try!</code>是对<code>try?</code>的强制解包。但对于异常抛出的情况程序还是会崩溃。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> result3 = <span class="keyword">try</span>! divide(<span class="number">20</span>, <span class="number">10</span>) <span class="comment">//2, Int</span></span><br><span class="line"><span class="keyword">var</span> result4 = <span class="keyword">try</span>! divide(<span class="number">20</span>, <span class="number">0</span>) <span class="comment">// 崩溃，Error抛出,Fatal error: &#x27;try!&#x27; expression unexpectedly raised an error</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>对于<code>try?</code>和<code>try!</code>，下述代码中<code>a</code>和<code>b</code>是等价的。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">try</span>? divide(<span class="number">20</span>, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">var</span> b : <span class="type">Int?</span></span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">        b = <span class="keyword">try</span> divide(<span class="number">20</span>, <span class="number">0</span>)</span><br><span class="line">&#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">       b = <span class="literal">nil</span></span><br><span class="line">       <span class="built_in">print</span>(error) <span class="comment">//illegalArg(&quot;0不能作为除数&quot;)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="rethrows"><a href="#rethrows" class="headerlink" title="rethrows"></a><code>rethrows</code></h2><p><code>rethrows</code>表明：函数本身不会抛出错误，但调用闭包参数抛出错误，那么它会将错误向上抛。否则就要处理<code>Error</code></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">exec</span><span class="params">(<span class="number">_</span> fn: <span class="params">(Int,Int)</span></span></span> <span class="keyword">throws</span> -&gt; <span class="type">Int</span>,<span class="number">_</span> num1: <span class="type">Int</span> ,<span class="number">_</span> num2: <span class="type">Int</span>) <span class="keyword">rethrows</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="keyword">try</span> fn(num1,num2))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> exec(divide(<span class="number">_</span>:<span class="number">_</span>:), <span class="number">10</span>, <span class="number">20</span>)</span><br></pre></td></tr></table></figure>

<h2 id="defer"><a href="#defer" class="headerlink" title="defer"></a><code>defer</code></h2><ul>
<li><p><code>defer</code>语句用来定义任何方式(抛错误，<code>return</code>等)离开代码块前必须执行的代码。<code>defer</code>语句将延迟至当前作用域结束之前执行。类似于<code>java</code>中的<code>finally</code>。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//模拟打开文件</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">open</span><span class="params">(<span class="number">_</span> fileName: String)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;open&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//模拟关闭文件</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">close</span><span class="params">(<span class="number">_</span> file: Int)</span></span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;close&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">processFile</span><span class="params">(<span class="number">_</span> fileName: String)</span></span> <span class="keyword">throws</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> file = <span class="keyword">open</span>(fileName)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//定义延迟执行的代码</span></span><br><span class="line">    <span class="keyword">defer</span> &#123;</span><br><span class="line">        close(file)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> result = <span class="keyword">try</span> divide(<span class="number">20</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="built_in">print</span>(result)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> processFile(<span class="string">&quot;test.txt&quot;</span>)</span><br><span class="line"><span class="comment">//open</span></span><br><span class="line"><span class="comment">//close</span></span><br><span class="line"><span class="comment">//Fatal error: Error raised at top level</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>defer</code>语句的执行顺序与定义顺序相反</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testDefer</span><span class="params">()</span></span> <span class="keyword">throws</span> &#123;</span><br><span class="line">    <span class="keyword">defer</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;first&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">defer</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;second&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;abc&quot;</span>)</span><br><span class="line">    <span class="keyword">throw</span> <span class="type">SomeError</span>.illegalArg(<span class="string">&quot;abc&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> testDefer()</span><br><span class="line"><span class="comment">//abc</span></span><br><span class="line"><span class="comment">//second</span></span><br><span class="line"><span class="comment">//first</span></span><br><span class="line"><span class="comment">//Fatal error: Error raised at top level断言</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="断言-assert"><a href="#断言-assert" class="headerlink" title="断言(assert)"></a>断言(assert)</h2><p>很多编程语言都有断言机制：不符合指定条件就抛出运行时错误，常用于调试(debug)阶段的条件判断。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">assertDevide</span><span class="params">(<span class="number">_</span> v1: Int, <span class="number">_</span> v2: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="built_in">assert</span>(v2 != <span class="number">0</span>,<span class="string">&quot;除数不能为0&quot;</span>) <span class="comment">//是否满足条件，否则抛出错误信息</span></span><br><span class="line">    <span class="keyword">return</span> v1 / v2</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(assertDevide(<span class="number">10</span>, <span class="number">2</span>))</span><br></pre></td></tr></table></figure>

<p><code>assert</code>断言是不能被<code>try-catch</code>捕获的。</p>
<p>默认情况下，<code>Swift</code>的断言只会在<code>Debug</code>模式下生效，<code>Release</code>模式下会忽略。不过也可以通过<code>Build Setting</code> -&gt; <code>Other Swift Flags</code>中修改断言的默认行为。</p>
<p>在<code>Debug</code>模式下，添加<code>-assert-conig Release</code>可以强制关闭Debug模式下断言</p>
<p>在<code>Release</code>模式下，添加<code>-assert-config Debug</code>可以在Release模式下开启断言</p>
<h2 id="fatalError"><a href="#fatalError" class="headerlink" title="fatalError"></a>fatalError</h2><ul>
<li><p>如果遇到严重问题，希望结束程序运行时，可以直接用<code>fatalError</code>函数抛出错误**(这是无法通过try-catch捕捉的错误)**</p>
<ul>
<li>使用<code>fatalError</code>函数，就不需要写<code>return</code></li>
</ul>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testFatalError</span><span class="params">(<span class="number">_</span> num: Int)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> num &gt;= <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fatalError</span>(<span class="string">&quot;num不能小于0&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在某些不得不实现，但不希望别人调用的方法，可以考虑内部使用<code>fatalError</code>函数</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123; <span class="keyword">required</span> <span class="keyword">init</span>()&#123;&#125; &#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> : <span class="title">Person</span> </span>&#123;</span><br><span class="line">        <span class="keyword">required</span> <span class="keyword">init</span>() &#123; <span class="built_in">fatalError</span>(<span class="string">&quot;don&#x27;t call Student.init&quot;</span>)&#125;</span><br><span class="line">    <span class="keyword">init</span>(<span class="number">_</span> score: <span class="type">Float</span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="局部作用域"><a href="#局部作用域" class="headerlink" title="局部作用域"></a>局部作用域</h2><p>可以使用<code>do</code>实现局部作用域</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">4</span></span><br><span class="line">  <span class="keyword">let</span> b = <span class="number">5</span></span><br><span class="line">  <span class="built_in">print</span>(a + b)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">4</span></span><br><span class="line">  <span class="keyword">let</span> b = <span class="number">5</span></span><br><span class="line">  <span class="built_in">print</span>(a - b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/07/Swift5-1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%8D%8F%E8%AE%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dev.Gao">
      <meta itemprop="description" content="人类的本能是胆怯，但人类的本质是不甘心">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dev.Gao的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/07/Swift5-1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%8D%8F%E8%AE%AE/" class="post-title-link" itemprop="url">Swift5学习笔记之协议</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-09-07 11:15:53" itemprop="dateCreated datePublished" datetime="2019-09-07T11:15:53+08:00">2019-09-07</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/Swift/" itemprop="url" rel="index"><span itemprop="name">Swift</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li><p>协议可以用来定义方法、属性、下标的声明，协议可以被枚举、结构体、类遵守(多个协议之间用逗号隔开)</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Drawable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">draw</span><span class="params">()</span></span></span><br><span class="line">    <span class="keyword">var</span> x: <span class="type">Int</span> &#123; <span class="keyword">get</span> <span class="keyword">set</span> &#125;</span><br><span class="line">    <span class="keyword">var</span> y: <span class="type">Int</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    <span class="keyword">subscript</span>(index: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123; <span class="keyword">get</span> <span class="keyword">set</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Test1</span> </span>&#123; &#125;</span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Test2</span> </span>&#123; &#125;</span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Test3</span> </span>&#123; &#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestClass</span>: <span class="title">Test1</span>, <span class="title">Test2</span>, <span class="title">Test3</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>协议中定义方法时不能有默认参数值</p>
</li>
<li><p>默认情况下，协议中定义的内容必须全部都实现，也有办法办到只实现部分内容</p>
</li>
</ul>
<h2 id="协议中的属性"><a href="#协议中的属性" class="headerlink" title="协议中的属性"></a>协议中的属性</h2><ul>
<li><p>协议中定义的属性时必须用<code>var</code>关键字。如果该属性只有<code>get</code>方法时，在实现时，如果重写成存储属性，可以将其重写为<code>let</code></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Test4</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> x: <span class="type">Int</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Test1</span>: <span class="title">Test4</span> </span></span><br><span class="line"><span class="class">    <span class="title">let</span> <span class="title">x</span> : <span class="title">Int</span> = 0</span></span><br><span class="line"><span class="class">&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>实现协议时的属性权限要不小于协议中定义的属性权限</p>
<ul>
<li>协议定义的<code>get</code>、<code>set</code>,用<code>var</code>存储属性或<code>get</code>、<code>set</code>计算属性去实现</li>
<li>协议定义<code>get</code>,用任何属性（存储、计算）都可以实现</li>
</ul>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Drawable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">draw</span><span class="params">()</span></span></span><br><span class="line">    <span class="keyword">var</span> x: <span class="type">Int</span> &#123; <span class="keyword">get</span> <span class="keyword">set</span> &#125;</span><br><span class="line">    <span class="keyword">var</span> y: <span class="type">Int</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    <span class="keyword">subscript</span>(index: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123; <span class="keyword">get</span> <span class="keyword">set</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person1</span> : <span class="title">Drawable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> x: <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line">  <span class="keyword">let</span> y: <span class="type">Int</span> = <span class="number">0</span> <span class="comment">//只读，get</span></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">draw</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Person1 draw&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">subscript</span>(index: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">set</span> &#123; &#125;</span><br><span class="line">    <span class="keyword">get</span> &#123; index &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person2</span> : <span class="title">Drawable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> x: <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line">  <span class="keyword">var</span> y: <span class="type">Int</span> &#123; <span class="number">0</span> &#125; <span class="comment">// set get,可读可写</span></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">draw</span><span class="params">()</span></span> &#123; <span class="built_in">print</span>(<span class="string">&quot;Person2 draw&quot;</span>) &#125;</span><br><span class="line">  <span class="keyword">subscript</span>(index: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">      <span class="keyword">set</span> &#123;&#125;</span><br><span class="line">    <span class="keyword">get</span> &#123; index &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="协议中的static、class"><a href="#协议中的static、class" class="headerlink" title="协议中的static、class"></a>协议中的<code>static</code>、<code>class</code></h2><ul>
<li><p>为了保证通用，协议中必须用<code>static</code>定义类型方法、类型属性、类型下标，因为枚举和结构体中是不能使用<code>class</code>的。但是在类中实现的时候，可以根据需要使用<code>static</code>或<code>class</code>。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Writeable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">write</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>: <span class="title">Writeable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">write</span><span class="params">()</span></span> &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;Student write&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wirtor</span>: <span class="title">Writeable</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">write</span>() </span>&#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;Wirtor write&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span>: <span class="title">Writeable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">write</span><span class="params">()</span></span> &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;Person write&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="协议中的mutating"><a href="#协议中的mutating" class="headerlink" title="协议中的mutating"></a>协议中的<code>mutating</code></h2><ul>
<li><p>只有将协议中的实例方法标记为<code>mutating</code>，才允许结构体、枚举的具体实现修改自身内存。类在实现方法时不用加<code>mutating</code>,枚举、结构体才需要加<code>mutating</code></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">MutatingProtocol</span> </span>&#123;</span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">change</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Size</span>: <span class="title">MutatingProtocol</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">change</span><span class="params">()</span></span> &#123; <span class="comment">//Class 不用加 mutating</span></span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;change&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span>: <span class="title">MutatingProtocol</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> x: <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line">  <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">change</span><span class="params">()</span></span> &#123;</span><br><span class="line">      x = <span class="number">10</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="协议中的初始化器"><a href="#协议中的初始化器" class="headerlink" title="协议中的初始化器"></a>协议中的初始化器</h2><h3 id="init"><a href="#init" class="headerlink" title="init"></a><code>init</code></h3><p>协议中还可以定义初始化器<code>init</code></p>
<ul>
<li><p><strong>非<code>final</code>类</strong>实现时必须加上<code>required</code></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">PointProtocol</span> </span>&#123;</span><br><span class="line">    <span class="keyword">init</span>(x: <span class="type">Int</span> ,y: <span class="type">Int</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Size</span> : <span class="title">PointProtocol</span> </span>&#123;</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>(x: <span class="type">Int</span>, y: <span class="type">Int</span>) &#123; &#125; <span class="comment">//必须加required</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Point</span> : <span class="title">PointProtocol</span> </span>&#123;</span><br><span class="line">    <span class="keyword">init</span>(x: <span class="type">Int</span>, y: <span class="type">Int</span>) &#123; &#125; <span class="comment">//final类 可以不用加 required</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果从协议实现的初始化器，刚好是重写了父类的指定初始化器，那么这个初始化器必须同时加上<code>required</code>、<code>override</code>。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Livable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">init</span>(age: <span class="type">Int</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123; <span class="comment">//Person 和 Livable 没有关系</span></span><br><span class="line">        <span class="keyword">init</span>(age: <span class="type">Int</span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>: <span class="title">Person</span>, <span class="title">Livable</span> </span>&#123;</span><br><span class="line">        <span class="keyword">required</span> <span class="keyword">override</span> <span class="keyword">init</span>(age: <span class="type">Int</span>) &#123;</span><br><span class="line">            <span class="keyword">super</span>.<span class="keyword">init</span>(age: age)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="init-和init"><a href="#init-和init" class="headerlink" title="init?和init!"></a><code>init?</code>和<code>init!</code></h3><ul>
<li><p>协议中定义的<code>init?</code>、<code>init!</code>，可以用<code>init</code>、<code>init?</code>、<code>init!</code>去实现。</p>
</li>
<li><p>协议中定义的<code>init</code>，可以用<code>init</code>、<code>init!</code>去实现。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">InitProtocol</span> </span>&#123;</span><br><span class="line">    <span class="keyword">init</span>()</span><br><span class="line">    <span class="keyword">init</span>?(age: <span class="type">Int</span>)</span><br><span class="line">    <span class="keyword">init</span>!(no: <span class="type">Int</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> : <span class="title">InitProtocol</span></span>&#123;</span><br><span class="line">        <span class="comment">//required init()&#123;&#125;</span></span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>!() &#123;&#125;</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>?(age: <span class="type">Int</span>) &#123; &#125;</span><br><span class="line">        <span class="comment">//required init!(age: Int) &#123;&#125;</span></span><br><span class="line">        <span class="comment">//required init(age: Int) &#123;&#125;</span></span><br><span class="line">         </span><br><span class="line">        <span class="comment">//required init!(no: Int) &#123; &#125;</span></span><br><span class="line">        <span class="comment">//required init?(no: Int) &#123;&#125;</span></span><br><span class="line">      <span class="keyword">required</span> <span class="keyword">init</span>(no: <span class="type">Int</span>) &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="协议的继承"><a href="#协议的继承" class="headerlink" title="协议的继承"></a>协议的继承</h2><p>一个协议可以继承其他协议</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">SuperProtocol</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">breath</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">ChildProtocol</span>: <span class="title">SuperProtocol</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> : <span class="title">ChildProtocol</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">func</span> <span class="title">breath</span><span class="params">()</span></span> &#123; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">run</span><span class="params">()</span></span> &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="协议的组合"><a href="#协议的组合" class="headerlink" title="协议的组合"></a>协议的组合</h2><p>如果要求一个参数遵循多个协议可以使用形如：<code>FirstProtocol &amp; SecondProtocol &amp; …</code>这样的形式，将多个协议拼接起来。也可以指定参数的类类型(<code>class type</code>),但最多一个。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">FirstProtocol</span> </span>&#123; &#125;</span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">SecondProtocol</span> </span>&#123; &#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//接受Person或者其子类的实例</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fn0</span> <span class="params">(obj: Person)</span></span> &#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//接受遵循FirstProtocol协议的实例</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fn1</span> <span class="params">(obj: FirstProtocol)</span></span> &#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//接受遵循FirstProtocol和SecondProtocol协议的实例</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fn2</span> <span class="params">(obj: FirstProtocol &amp; SecondProtocol)</span></span> &#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//接受遵循FirstProtocol和SecondProtocol协议,并且是Person或者其子类的实例</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fn3</span> <span class="params">(obj: Person &amp; FirstProtocol &amp; SecondProtocol)</span></span> &#123; &#125;</span><br></pre></td></tr></table></figure>

<h2 id="Swift中常见的几个协议"><a href="#Swift中常见的几个协议" class="headerlink" title="Swift中常见的几个协议"></a><code>Swift</code>中常见的几个协议</h2><h3 id="CaseIterable"><a href="#CaseIterable" class="headerlink" title="CaseIterable"></a><code>CaseIterable</code></h3><ul>
<li><p>让枚举遵守<code>CaseIterable</code>协议，可以实现遍历枚举值</p>
<ul>
<li><code>CaseIterable</code>协议中，定义了一个可以返回<code>allCases</code>数组的类属性。但不用实现该属性，编译器会自动实现</li>
</ul>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Season</span>: <span class="title">CaseIterable</span> </span>&#123;</span><br><span class="line">        <span class="keyword">case</span> spring, summer, autumn, winter</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> seasons = <span class="type">Season</span>.allCases</span><br><span class="line"><span class="built_in">print</span>(seasons.<span class="built_in">count</span>) <span class="comment">//4</span></span><br><span class="line"><span class="keyword">for</span> season <span class="keyword">in</span> seasons &#123;</span><br><span class="line">        <span class="built_in">print</span>(season) <span class="comment">//spring summer autumn winter</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="CustomStringConvertiable"><a href="#CustomStringConvertiable" class="headerlink" title="CustomStringConvertiable"></a><code>CustomStringConvertiable</code></h3><ul>
<li><p>遵守<code>CustomStringConvertiable</code>、<code>CustomDebugStringConvertible</code>协议，都可以定义自定义实例的打印字符串</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> : <span class="title">CustomStringConvertible</span>, <span class="title">CustomDebugStringConvertible</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> age = <span class="number">0</span></span><br><span class="line">    <span class="keyword">var</span> description: <span class="type">String</span> &#123; <span class="string">&quot;person_\(age)&quot;</span> &#125;</span><br><span class="line">    <span class="keyword">var</span> debugDescription: <span class="type">String</span> &#123; <span class="string">&quot;debug_person_\(age)&quot;</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p = <span class="type">Person</span>()</span><br><span class="line"><span class="built_in">print</span>(p) <span class="comment">//person_0</span></span><br><span class="line"><span class="built_in">debugPrint</span>(p) <span class="comment">//debug_person_0</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>print</code>调用的是<code>CustomStringConvertible</code>协议的<code>descrition</code></p>
</li>
<li><p><code>debugPrint</code>和<code>po</code>调用的是<code>CustomDebugStringConvertible</code>协议的<code>debugDescription</code></p>
</li>
</ul>
<h2 id="Any和AnyObject"><a href="#Any和AnyObject" class="headerlink" title="Any和AnyObject"></a><code>Any</code>和<code>AnyObject</code></h2><p><code>Swift</code>提供了2种特殊的类型：<code>Any</code>、<code>AnyObject</code></p>
<ul>
<li><p><code>Any</code>：可以代表任意类型(枚举、结构体、类，也包括函数类型)</p>
</li>
<li><p><code>AnyObject</code>：可以代表任意<strong>类类型</strong>(在协议后面写上：<code>:AnyObject</code>代表只有类能遵守这个协议，如果换成<code>: class</code>效果雷同)</p>
<p>协议中的写法：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">AnyTypeProtocol</span>: <span class="title">Any</span> </span>&#123; &#125; <span class="comment">//枚举、结构体和类都可以遵守</span></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">AnyObjectProtocol</span>: <span class="title">AnyObject</span> </span>&#123; &#125;<span class="comment">//只有类可以遵守</span></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">ClassProtocol</span>: <span class="title">class</span> </span>&#123; &#125;<span class="comment">//只有类可以遵守，是AnyObject的另外一种写法</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>: <span class="title">AnyTypeProtocol</span>, <span class="title">AnyObjectProtocol</span>,<span class="title">ClassProtocol</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span> : <span class="title">AnyTypeProtocol</span> </span>&#123; &#125;</span><br></pre></td></tr></table></figure>

<p>常见写法：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//创建一个能存放任意类型的变量</span></span><br><span class="line"><span class="keyword">var</span> stu: <span class="type">Any</span> = <span class="number">10</span></span><br><span class="line">stu = <span class="string">&quot;Jack&quot;</span></span><br><span class="line">stu = <span class="type">Person</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建1个能存放任意类型的数组</span></span><br><span class="line"><span class="keyword">var</span> data = <span class="type">Array</span>&lt;<span class="type">Any</span>&gt;()<span class="comment">//var data = [Any]()</span></span><br><span class="line">data.append(<span class="number">1</span>)</span><br><span class="line">data.append(<span class="number">3.14</span>)</span><br><span class="line">data.append(<span class="type">Student</span>())</span><br><span class="line">data.append(<span class="string">&quot;Jack&quot;</span>)</span><br><span class="line">data.append(&#123; <span class="number">10</span> &#125;)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="is和as"><a href="#is和as" class="headerlink" title="is和as"></a><code>is</code>和<code>as</code></h2><h3 id="is的用法"><a href="#is的用法" class="headerlink" title="is的用法"></a><code>is</code>的用法</h3><p><code>is</code>用来判断是否为某种类型或者使其子类，可以判断是否遵守某个<code>protocol</code></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">IsProtocol</span> </span>&#123; &#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123; &#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>: <span class="title">Person</span>, <span class="title">IsProtocol</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> stu : <span class="type">Any</span> = <span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(stu <span class="keyword">is</span> <span class="type">Int</span>)<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">stu = <span class="string">&quot;Jack&quot;</span></span><br><span class="line"><span class="built_in">print</span>(stu <span class="keyword">is</span> <span class="type">String</span>)<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">stu = <span class="type">Student</span>()</span><br><span class="line"><span class="built_in">print</span>(stu <span class="keyword">is</span> <span class="type">Person</span>)<span class="comment">//true</span></span><br><span class="line"><span class="built_in">print</span>(stu <span class="keyword">is</span> <span class="type">Student</span>)<span class="comment">//true</span></span><br><span class="line"><span class="built_in">print</span>(stu <span class="keyword">is</span> <span class="type">IsProtocol</span>)<span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<h3 id="as和as-as"><a href="#as和as-as" class="headerlink" title="as和as?,as!"></a><code>as</code>和<code>as?</code>,<code>as!</code></h3><p><code>as</code>用来做强制类型转换，<code>as?</code>通常用在编译器<strong>无法确定是否能转换成功</strong>的前提下，转换出来的结果也可选项。<code>as!</code>则相当于 <code>as?</code> 获取可选项后做强制解包。<code>as</code>用在确定能转换成功的情况，比如：可选项 -&gt; <code>Any</code>;<code>Int</code> -&gt; <code>Double</code>;子类转父类等等。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123; &#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>: <span class="title">Person</span>, <span class="title">IsProtocol</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">func</span> <span class="title">study</span><span class="params">()</span></span> &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Student study&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> stu: <span class="type">Any</span> = <span class="number">10</span></span><br><span class="line">stu = <span class="type">Student</span>()</span><br><span class="line">    </span><br><span class="line"><span class="comment">//(stu as? Student)?.study() 等价于下面两句：</span></span><br><span class="line"><span class="keyword">var</span> result =  stu <span class="keyword">as</span>? <span class="type">Student</span> <span class="comment">// result 是 Student? 类型</span></span><br><span class="line">result?.study()</span><br><span class="line">    </span><br><span class="line"><span class="comment">//(stu as! Student).study() 等价于下面两句。</span></span><br><span class="line"><span class="comment">//也等价于 (stu as? Student)!.study()</span></span><br><span class="line"><span class="keyword">var</span> result2 = stu <span class="keyword">as</span>! <span class="type">Student</span> <span class="comment">// result2 是Student类型</span></span><br><span class="line">result2.study()</span><br><span class="line">    </span><br><span class="line"><span class="comment">//------as------</span></span><br><span class="line"><span class="keyword">var</span> data = [<span class="type">Any</span>]()</span><br><span class="line">data.append(<span class="type">Int</span>(<span class="string">&quot;123&quot;</span>) <span class="keyword">as</span> <span class="type">Any</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> d = <span class="number">10</span> <span class="keyword">as</span> <span class="type">Double</span></span><br><span class="line"><span class="built_in">print</span>(d)<span class="comment">//10.0</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> student = <span class="type">Student</span>()</span><br><span class="line"><span class="keyword">var</span> person = student <span class="keyword">as</span> <span class="type">Person</span></span><br></pre></td></tr></table></figure>

<h2 id="元类型"><a href="#元类型" class="headerlink" title="元类型"></a>元类型</h2><ul>
<li><p><code>X.self</code>(<code>X</code>代表类)是一个元类型(<code>metadata</code>)的指针，<code>metadata</code>存放着类型相关信息</p>
</li>
<li><p><code>X.self</code>属于<code>X.Type</code>类型</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123; &#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> : <span class="title">Person</span> </span>&#123; &#125;</span><br><span class="line"><span class="keyword">var</span> perType : <span class="type">Person</span>.<span class="type">Type</span> = <span class="type">Person</span>.<span class="keyword">self</span> <span class="comment">//perType 是 Person.Type类型</span></span><br><span class="line"><span class="keyword">var</span> stuType : <span class="type">Student</span>.<span class="type">Type</span> = <span class="type">Student</span>.<span class="keyword">self</span> <span class="comment">//stuType 是 Student.Type类型</span></span><br><span class="line">perType = <span class="type">Student</span>.<span class="keyword">self</span> <span class="comment">//父类的元类型可以指向子类的元类型，但是子类的元类型缺不能指向父类的元类型</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用函数<code>type(of: &lt;T&gt;)</code>,可以获取某个实例的元类型，但在汇编层面上这个并不是一个真正的函数(没有<code>call</code>调用)，编译器直接取到参数实例的前八个字节。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> per = <span class="type">Person</span>()</span><br><span class="line"><span class="keyword">var</span> perType2 = type(of: per) <span class="comment">//Person.Type</span></span><br><span class="line"><span class="built_in">print</span>(<span class="type">Person</span>.<span class="keyword">self</span> == perType2) <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>AnyObject.Type</code>类型可以指向任意类的元类型，在<code>Swift</code>中定义，<code>public typelias AnyClass = AnyObject.Type</code>，所以可以用<code>AnyClass</code>替代</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> anyType : <span class="type">AnyObject</span>.<span class="type">Type</span> = <span class="type">Student</span>.<span class="keyword">self</span></span><br><span class="line">anyType = <span class="type">Person</span>.<span class="keyword">self</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> anyType2 : <span class="type">AnyClass</span> = <span class="type">Student</span>.<span class="keyword">self</span></span><br><span class="line">anyType2 = <span class="type">Person</span>.<span class="keyword">self</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="元类型的应用"><a href="#元类型的应用" class="headerlink" title="元类型的应用"></a>元类型的应用</h3><p><code>X.self</code> 类似于<code>OC</code>中的实例的<code>.class</code>属性，而<code>X.Type</code>类似于<code>OC</code>中的<code>Class</code>类型。<code>X.self</code>和<code>X.Type</code>也可以像<code>OC</code>中使用<code>Class</code>调用方法。</p>
<p><strong>注意：如果使用<code>X.Type</code>调用初始化器，必须是<code>required</code>的，因为<code>X.Type</code>也可能是子类的，只有<code>required</code>能保证子类中也有该初始化器</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>() &#123; &#125;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">speak</span>() </span>&#123; <span class="built_in">print</span>(<span class="string">&quot;Animal speak&quot;</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>: <span class="title">Animal</span> </span>&#123; &#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span>: <span class="title">Animal</span> </span>&#123; &#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pig</span>: <span class="title">Animal</span> </span>&#123; &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">create</span><span class="params">(<span class="number">_</span> clses: [Animal.<span class="keyword">Type</span>])</span></span> -&gt; [<span class="type">Animal</span>] &#123;</span><br><span class="line">    <span class="keyword">var</span> arr = [<span class="type">Animal</span>]()</span><br><span class="line">  <span class="keyword">for</span> cls <span class="keyword">in</span> clses &#123;</span><br><span class="line">      cls.speak()</span><br><span class="line">    arr.append(cls.<span class="keyword">init</span>())</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(create([<span class="type">Cat</span>.<span class="keyword">self</span>,<span class="type">Dog</span>.<span class="keyword">self</span>,<span class="type">Pig</span>.<span class="keyword">self</span>]))</span><br></pre></td></tr></table></figure>

<p>所以<strong>对于类属性以及类方法也可使用元类型进行调用</strong>。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">var</span> age = <span class="number">0</span></span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">run</span><span class="params">()</span></span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">Person</span>.age = <span class="number">10</span></span><br><span class="line"><span class="type">Person</span>.<span class="keyword">self</span>.age = <span class="number">10</span></span><br><span class="line"><span class="type">Person</span>.run()</span><br><span class="line"><span class="type">Person</span>.<span class="keyword">self</span>.run()</span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> p0 = <span class="type">Person</span>()</span><br><span class="line"><span class="keyword">var</span> p1 = <span class="type">Person</span>.<span class="keyword">self</span>()</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="type">Person</span>.<span class="keyword">init</span>()</span><br><span class="line"><span class="keyword">var</span> p3 = <span class="type">Person</span>.<span class="keyword">self</span>.<span class="keyword">init</span>()</span><br></pre></td></tr></table></figure>

<p>在纯<code>Swift</code>中，也实现了某些<code>OC</code>中<code>Runtime</code>方法中：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> age: <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> : <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> no: <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(class_getInstanceSize(<span class="type">Student</span>.<span class="keyword">self</span>)) <span class="comment">//32</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//class_getSuperclass() 返回的是可选类型，需要强制解包</span></span><br><span class="line"><span class="built_in">print</span>(class_getSuperclass(<span class="type">Student</span>.<span class="keyword">self</span>)!) <span class="comment">//Person</span></span><br><span class="line"><span class="built_in">print</span>(class_getSuperclass(<span class="type">Person</span>.<span class="keyword">self</span>)!) <span class="comment">//_TtCs12_SwiftObject</span></span><br></pre></td></tr></table></figure>

<h2 id="Self"><a href="#Self" class="headerlink" title="Self"></a><code>Self</code></h2><ul>
<li><p><code>Self</code>代表当前类型。此<code>Self</code>和<code>self</code>不同。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> age = <span class="number">1</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">var</span> <span class="built_in">count</span> = <span class="number">2</span></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">run</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="keyword">self</span>.age)</span><br><span class="line">    <span class="built_in">print</span>(<span class="type">Self</span>.<span class="built_in">count</span>)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Self</code>一般用作返回值类型，限定返回值跟方法和调用者必须是同一类型。(也可以作为参数类型)</p>
<blockquote>
<p><code>Self</code>和<code>OC</code>中<code>InstanceType</code>的作用差不多。再返回值为<code>Self</code>的方法中，不返回特定的类型，因为子类有可能继承。一般使用<code>type(of: T)</code>获取到元类型，再试用元类型调用方法。</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">SelfProtocol</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">()</span></span> -&gt; <span class="type">Self</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> : <span class="title">SelfProtocol</span> </span>&#123;</span><br><span class="line">        <span class="keyword">required</span> <span class="keyword">init</span>() &#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">()</span></span> -&gt; <span class="type">Self</span> &#123;</span><br><span class="line">            type(of: <span class="keyword">self</span>).<span class="keyword">init</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/06/Swift5-1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%8F%AF%E9%80%89%E9%93%BE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dev.Gao">
      <meta itemprop="description" content="人类的本能是胆怯，但人类的本质是不甘心">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dev.Gao的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/06/Swift5-1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%8F%AF%E9%80%89%E9%93%BE/" class="post-title-link" itemprop="url">Swift5学习笔记之可选链</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-09-06 11:15:53" itemprop="dateCreated datePublished" datetime="2019-09-06T11:15:53+08:00">2019-09-06</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/Swift/" itemprop="url" rel="index"><span itemprop="name">Swift</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>对于可选项的方法调用，参考如下代码：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123; <span class="keyword">var</span> price = <span class="number">0</span> &#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> </span>&#123; <span class="keyword">var</span> weight = <span class="number">0</span> &#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span> = <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="keyword">var</span> dog: <span class="type">Dog</span> = <span class="type">Dog</span>()</span><br><span class="line">  <span class="keyword">var</span> car: <span class="type">Car?</span> = <span class="type">Car</span>()</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">age</span><span class="params">()</span></span> -&gt; <span class="type">Int</span> &#123; <span class="number">18</span> &#125;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">eat</span><span class="params">()</span></span>  &#123; <span class="built_in">print</span>(<span class="string">&quot;Person eat&quot;</span>) &#125;</span><br><span class="line">  <span class="keyword">subscript</span>(index: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123; index &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>如果可选项为<code>nil</code>，调用方法、下标、属性失败，结果为<code>nil</code></p>
<ul>
<li>可选项为<code>nil</code>的情况下，调用方法，获取属性，使用下标<strong>不会造成崩溃异常</strong>，只是结果为<code>nil</code></li>
</ul>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> person: <span class="type">Person?</span> = <span class="literal">nil</span></span><br><span class="line"><span class="keyword">var</span> age1 = person?.age() <span class="comment">//age1的类型是Int?,如果person是nil,age1是nil</span></span><br><span class="line"><span class="keyword">var</span> age2 = person!.age() <span class="comment">//age2的类型是Int,如果person是nil,使用&quot;!&quot;强制解包会崩溃</span></span><br><span class="line"><span class="keyword">var</span> name = person?.name <span class="comment">//name的类型是 String?</span></span><br><span class="line"><span class="keyword">var</span> index = person?[<span class="number">6</span>] <span class="comment">//index的类型是 Int？</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
<ul>
<li><p>如果可选项不为<code>nil</code>，调用方法、下标、属性成功，结果会被包装成可选项<code>Type？</code></p>
<ul>
<li>如果结果本来就是可选项，不会进行再次包装</li>
</ul>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> person: <span class="type">Person?</span> = <span class="type">Person</span>()</span><br><span class="line"><span class="keyword">var</span> age1 = person?.age() <span class="comment">//age1的类型是Int?,如果person是nil,age1是nil</span></span><br><span class="line"><span class="keyword">var</span> age2 = person!.age() <span class="comment">//age2的类型是Int,如果person是nil,使用&quot;!&quot;强制解包会崩溃</span></span><br><span class="line"><span class="keyword">var</span> name = person?.name <span class="comment">//name的类型是 String?</span></span><br><span class="line"><span class="keyword">var</span> index = person?[<span class="number">6</span>] <span class="comment">//index的类型是 Int？</span></span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> dog = person?.dog <span class="comment">//dog类型是Dog?</span></span><br><span class="line"><span class="keyword">var</span> weight = person?.dog.weight <span class="comment">//weight的类型Int?</span></span><br><span class="line"><span class="keyword">var</span> price = person?.car?.price <span class="comment">//price的类型是Int?</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>判断一个可选项调用方法是否成功有两种方式</p>
<ol>
<li><p>通过可选项绑定判断可选项是否为空</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> person: <span class="type">Person?</span> = <span class="type">Person</span>()</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> person_temp = person &#123; <span class="comment">//此时person 是 Person？类型，person_temp 是 Person类型</span></span><br><span class="line">    person_temp.eat() </span><br><span class="line">&#125; <span class="keyword">else</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;person:nil&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>也可以通过函数返回值来判断，对于没有返回值的方法，即返回了<code>Void</code>类型的返回值。在<code>Swift</code>中，<code>Void</code>类型就是空元组<code>()</code>。所以对于没有返回值的方法，其实是返回了一个空元组。可选项为<code>nil</code>时，调用的方法返回的是<code>nil</code>。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> <span class="number">_</span> = person?.eat() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;eat 调用成功&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">     <span class="built_in">print</span>(<span class="string">&quot;eat 调用失败&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>多个<code>?</code>可以链接在一起，如果链中任何一个节点是<code>nil</code>,那么整个链就会调用失败</p>
<ul>
<li>经过可选链调用获得的返回值肯定是可选项，因为有可能存在<code>nil</code>的情景。</li>
</ul>
</li>
</ul>
<h2 id="常见的场景"><a href="#常见的场景" class="headerlink" title="常见的场景"></a>常见的场景</h2><ul>
<li><p>使用字典取值时，取出来的值都是可选类型，当可选项不为<code>nil</code>时，调用或赋值才会生效。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">//scores的类型是 [String,[Int]]</span></span><br><span class="line"><span class="keyword">var</span> scores = [</span><br><span class="line">    <span class="string">&quot;Jack&quot;</span>:[<span class="number">86</span>,<span class="number">82</span>,<span class="number">64</span>],</span><br><span class="line">  <span class="string">&quot;Rose&quot;</span>:[<span class="number">79</span>,<span class="number">94</span>,<span class="number">81</span>],</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">scores[<span class="string">&quot;Jack&quot;</span>]?[<span class="number">0</span>] = <span class="number">11</span></span><br><span class="line">scores[<span class="string">&quot;Rose&quot;</span>]?[<span class="number">2</span>] += <span class="number">10</span></span><br><span class="line">scores[<span class="string">&quot;Kate&quot;</span>]?[<span class="number">0</span>] = <span class="number">88</span></span><br><span class="line"><span class="built_in">print</span>(scores)     <span class="comment">//[&quot;Jack&quot;: [11, 82, 64], &quot;Rose&quot;: [79, 94, 91]]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>对于定义变量时，例如：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num1: <span class="type">Int?</span> = <span class="number">5</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>当使用<code>num1?</code>时，当<code>num1</code>不为<code>nil</code>时赋值才会成功；为<code>nil</code>时，不生效。</p>
</li>
<li><p>当使用<code>num1!</code>时，当<code>num1</code>为<code>nil</code>时，会直接崩溃，不为<code>nil</code>时，赋值生效。</p>
</li>
<li><p>当直接使用<code>num</code>时，不管<code>num</code>是否为<code>nil</code>,都会是新值（可选类型）。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line">num1? = <span class="number">10</span> <span class="comment">//Optional(10),num1为nil时，赋值后，num1还是nil</span></span><br><span class="line">num1! = <span class="number">10</span> <span class="comment">//Optional(10),num1为nil时，直接崩溃</span></span><br><span class="line">num1 = <span class="number">10</span> <span class="comment">//Optional(10)</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>对于字典中存放函数的，获取的函数也是可选类型(可为<code>nil</code>)，函数运行返回值也是<strong>可选类型</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> dict: [<span class="type">String</span> : (<span class="type">Int</span>,<span class="type">Int</span>) -&gt; <span class="type">Int</span>] = [</span><br><span class="line">    <span class="string">&quot;sum&quot;</span>: (+),</span><br><span class="line">  <span class="string">&quot;difference&quot;</span> : (-)</span><br><span class="line">]</span><br><span class="line"><span class="keyword">var</span> result = dict[<span class="string">&quot;sum&quot;</span>]?(<span class="number">10</span>,<span class="number">20</span>)</span><br><span class="line"><span class="built_in">print</span>(result)<span class="comment">//Optional(30)</span></span><br></pre></td></tr></table></figure>



</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/05/Swift5-1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%88%9D%E5%A7%8B%E5%8C%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dev.Gao">
      <meta itemprop="description" content="人类的本能是胆怯，但人类的本质是不甘心">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dev.Gao的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/05/Swift5-1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%88%9D%E5%A7%8B%E5%8C%96/" class="post-title-link" itemprop="url">Swift5学习笔记之初始化</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-09-05 11:15:53" itemprop="dateCreated datePublished" datetime="2019-09-05T11:15:53+08:00">2019-09-05</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/Swift/" itemprop="url" rel="index"><span itemprop="name">Swift</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="初始化器"><a href="#初始化器" class="headerlink" title="初始化器"></a>初始化器</h2><ul>
<li>类、结构体、枚举都可以定义初始化器。其中，类：如果<strong>没有自定初始化器会自动生成无参的初始化器</strong>，如果自定了初始化器，那么默认的无参的初始化器就不会生成了。</li>
<li><strong>类</strong>有2种初始化器：<strong>指定初始化器（<code>designated initializer</code>）</strong>、<strong>便捷初始化器（<code>convenience initializer</code>）</strong><ul>
<li>每个类至少有一个指定初始化器，指定初始化器是类的主要初始化器</li>
<li>默认初始化器总是类的指定初始化器</li>
<li>类偏向于少量的指定初始化器，一个类通常只有一个指定初始化器</li>
</ul>
</li>
<li>初始化器的相互调用规则：<ul>
<li>指定初始化器必须从它的<strong>直系父类</strong>调用指定初始化器，调用自己的不可以。<strong>不可以调用便捷初始化器</strong>。</li>
<li>便捷初始化器必须从本类的里调用另外一个初始化器(可以是便捷初始化器，也可以是指定初始化器)，不可以调用父类的初始化器</li>
<li>便捷初始化器最终必须调用一个指定初始化器</li>
</ul>
</li>
</ul>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> age = <span class="number">0</span></span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="keyword">init</span>(age: <span class="type">Int</span>,name: <span class="type">String</span>) &#123;</span><br><span class="line">      <span class="keyword">self</span>.age = age</span><br><span class="line">    <span class="keyword">self</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">convenience</span> <span class="keyword">init</span>(age: <span class="type">Int</span>) &#123;</span><br><span class="line">      <span class="keyword">self</span>.<span class="keyword">init</span>(age: age, name: <span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="keyword">self</span>.age = age</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">convenience</span> <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</span><br><span class="line">      <span class="keyword">self</span>.<span class="keyword">init</span>(age: <span class="number">0</span>,name: name)</span><br><span class="line">    <span class="keyword">self</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>: <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> score: <span class="type">Int</span></span><br><span class="line">  <span class="keyword">init</span>(age: <span class="type">Int</span>,name: <span class="type">String</span> , score: <span class="type">Int</span>) &#123;</span><br><span class="line">      <span class="keyword">self</span>.score = score;<span class="comment">//在调用父类指定初始化器前使用self。</span></span><br><span class="line">    <span class="keyword">super</span>.<span class="keyword">init</span>(age: age,name: name)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">convenience</span> <span class="keyword">init</span>(score: <span class="type">Int</span>) &#123;</span><br><span class="line">      <span class="keyword">self</span>.<span class="keyword">init</span>(age: <span class="number">0</span>,name: <span class="string">&quot;&quot;</span>, score:score)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2019/09/05/Swift5-1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%88%9D%E5%A7%8B%E5%8C%96/QQ20200906-154315.png" class="">

<ul>
<li>这一套规则保证了：使用任意初始化器，都可以完成地初始化实例。</li>
</ul>
<h2 id="两段式初始化"><a href="#两段式初始化" class="headerlink" title="两段式初始化"></a>两段式初始化</h2><blockquote>
<p><code>swift</code>在编码安全方面，为了保证初始化安全，设定了<strong>两段式初始化、安全检查</strong></p>
</blockquote>
<ul>
<li>第一阶段：初始化所有存储属性<ol>
<li>外层调用指定（便捷）初始化器。</li>
<li>分配内存给实例，但未初始化(汇编层面调用<code>alloc</code>)</li>
<li>指定初始化器确保当前类定义的存储属性都初始化。(先对自身属性进行复制或初始化)</li>
<li>指定初始化器调用父类的初始化器，不断向上调用，形成<strong>初始化器链</strong>.(再调用<code>super.init()</code>)</li>
</ol>
</li>
<li>第2阶段： 设置新的存储属性值<ol>
<li>从顶部初始化器往下，链中的每一个指定初始化器都有机会进一步定制实例</li>
<li>初始化器现在能够使用<code>self</code>(访问、修改它的属性，调用它的实例方法等等)</li>
<li>最终，链中任何便捷初始化器都有机会定制实例以及使用<code>self</code></li>
</ol>
</li>
</ul>
<h2 id="安全检查"><a href="#安全检查" class="headerlink" title="安全检查"></a>安全检查</h2><ul>
<li>指定初始化器必须保证在调用父类初始化器之前，其所在类定义的所有存储属性都要初始化成功。</li>
<li>指定初始化器必须先调用父类初始化器，然后才能为继承的属性设置新值</li>
<li>便捷初始化器必须先调用同类中的其他初始化器，然后再为任意属性设置新值。</li>
<li>初始化器在第1阶段初始化完成之前，不能调用任何实例方法、不能读取任何实例属性的值，也不能引用<code>self</code>。</li>
<li>直到第1阶段结束，实例才算完全合法。</li>
</ul>
<h2 id="重写"><a href="#重写" class="headerlink" title="重写"></a>重写</h2><ul>
<li>当重写父类的指定初始化器，必须加上<code>override</code>(即使子类的实现是便捷初始化器)</li>
<li>如果子类写了一个匹配父类便捷初始化器的初始化器，不用加<code>override</code><ul>
<li>因为父类的便捷初始化器永远不会通过子类直接调用，因此，严格来说，子类无法重写父类的便捷初始化器</li>
</ul>
</li>
</ul>
<h2 id="自动继承"><a href="#自动继承" class="headerlink" title="自动继承"></a>自动继承</h2><ol>
<li><p>如果子类没有自定义任何指定初始化器，它会自动继承父类所有的指定初始化器</p>
</li>
<li><p>如果子类提供了父类所有指定初始化器的实现(要么通过上述方式继承，要么重写)</p>
<ul>
<li>子类自动继承所有的父类便捷初始化器</li>
</ul>
</li>
<li><p>就算子类添加了更多的便捷初始化器，这些规则仍然适用</p>
</li>
<li><p>子类以便捷初始化器的形式重写父类的指定初始化器，也可作为满足规则②的一部分</p>
</li>
</ol>
<h2 id="required关键字"><a href="#required关键字" class="headerlink" title="required关键字"></a><code>required</code>关键字</h2><ul>
<li><p>用<code>required</code>修饰指定初始化器，表明其所有子类都必须实现该初始化器(通过继承或者重写实现)</p>
<ul>
<li><p>根据<strong>自动继承</strong>的原则(<em>如果子类没有自定义任何指定初始化器，它会自动继承父类所有的指定初始化器</em>)，所以这种情况下(<em>没有自定义初始化器</em>)，子类自动通过继承的方式实现了该初始化器。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>() &#123;&#125;</span><br><span class="line">  <span class="keyword">init</span>(age: <span class="type">Int</span>) &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>: <span class="title">Person</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果子类添加了自定义的初始化器，则需要通过重写的方式重写<code>required</code>初始化器</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>() &#123;&#125;</span><br><span class="line">  <span class="keyword">init</span>(age: <span class="type">Int</span>) &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>: <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">init</span>(no: <span class="type">Int</span>) &#123;</span><br><span class="line">      <span class="keyword">super</span>.<span class="keyword">init</span>(age: <span class="number">0</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">required</span> <span class="keyword">init</span>() &#123;</span><br><span class="line">      <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>如果子类重写了<code>required</code>初始化器，也必须加上<code>required</code>，不用加<code>override</code></p>
</li>
</ul>
<h2 id="属性观察器"><a href="#属性观察器" class="headerlink" title="属性观察器"></a>属性观察器</h2><ul>
<li><p>父类的属性在它自己的初始化器中赋值不会触发属性观察器，但在子类中初始化器中赋值会触发属性观察器</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span> &#123;</span><br><span class="line">      <span class="keyword">willSet</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;willSet:&quot;</span>,newValue)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">didSet</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;didSet:&quot;</span>,oldValue,<span class="string">&quot;:&quot;</span>,age)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">init</span>() &#123;</span><br><span class="line">      <span class="keyword">self</span>.age = <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> : <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">init</span>() &#123;</span><br><span class="line">      <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line">    <span class="keyword">self</span>.age = <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;    </span><br><span class="line"><span class="comment">//willSet: 1</span></span><br><span class="line"><span class="comment">//didSet: 0 : 1</span></span><br><span class="line"><span class="keyword">var</span> <span class="number">_</span> = <span class="type">Student</span>()</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="可失败初始化器"><a href="#可失败初始化器" class="headerlink" title="可失败初始化器"></a>可失败初始化器</h2><ul>
<li><p>类、结构体、枚举都可以使用<code>init?</code>定义可失败初始化器</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">  <span class="keyword">init</span>?(name: <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> name.isEmpty &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">self</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p = <span class="type">Person</span>(name: <span class="string">&quot;&quot;</span>) <span class="comment">// p的类型是 Person?</span></span><br></pre></td></tr></table></figure>

<p>常见的可失败是初始化器有：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="type">Int</span>(<span class="string">&quot;123&quot;</span>) <span class="comment">// public init?(_ description: String)</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Answer</span>: <span class="title">Int</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> wrong, <span class="keyword">right</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> an = <span class="type">Answer</span>(rawValue: <span class="number">1</span>)<span class="comment">// an的类型是 Answer?</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>不允许</strong>同时定义参数标签、参数个数、参数类型相同的可失败初始化器和非可失败初始化器</p>
<ul>
<li>这种写法会让编译器在调用时无法知道调用哪一个</li>
</ul>
</li>
<li><p>可以用<code>init!</code>定义隐式解包的可失败初始化器</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">  <span class="keyword">init</span>!(name: <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> name.isEmpty &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">self</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果初始化器(非可失败、可失败)调用一个可失败初始化器导致初始化失败，那么整个初始化过程都失败，并且后面的代码都停止执行</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">  <span class="keyword">var</span> age : <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line">  <span class="keyword">init</span>?(name: <span class="type">String</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> name.isEmpty &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">self</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">convenience</span> <span class="keyword">init</span>(age: <span class="type">Int</span>,name: <span class="type">String</span>) &#123;</span><br><span class="line">      <span class="keyword">self</span>.<span class="keyword">init</span>(name: name)!<span class="comment">//调用可失败初始化器需要强制解包，假如 init!(name: String),就不需要强制解包了</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;exec&quot;</span>)</span><br><span class="line">    <span class="keyword">self</span>.age = age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> <span class="number">_</span> = <span class="type">Person</span>(age: <span class="number">12</span>, name: <span class="string">&quot;&quot;</span>)<span class="comment">//直接崩溃在self.init(name:name)!</span></span><br><span class="line"><span class="keyword">var</span> <span class="number">_</span> = <span class="type">Person</span>(age: <span class="number">12</span>, name: <span class="string">&quot;agb&quot;</span>) <span class="comment">//可以正常执行</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>可以用一个非可失败初始化器重写一个可失败的初始化器，但反过来不行</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">  <span class="keyword">init</span>?(name: <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> name.isEmpty &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">self</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>: <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">init</span>(name: <span class="type">String</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> default_name = <span class="string">&quot;default&quot;</span></span><br><span class="line">      <span class="keyword">if</span> name.isEmpty &#123;</span><br><span class="line">          default_name = name</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="keyword">super</span>.<span class="keyword">init</span>(name: default_name)!</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="反初始化器-deinit"><a href="#反初始化器-deinit" class="headerlink" title="反初始化器(deinit)"></a>反初始化器(<code>deinit</code>)</h2><ul>
<li><p><code>deinit</code>叫做反初始化器，类似于<code>C++</code>的析构函数、<code>OC</code>的<code>dealloc</code>方法。当类的实例对象被释放内存时，就会调用实例对象的<code>deinit</code>方法</p>
</li>
<li><p><code>deinit</code>不接受任何参数，不能写<strong>小括号</strong>，不能自行调用</p>
</li>
<li><p>父类的<code>deinit</code>能被子类继承</p>
</li>
<li><p>子类的<code>deinit</code>实现执行完毕后会调用父类的<code>deinit</code></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">deinit</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;person deinit&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> : <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">deinit</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;student deinit&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment">控制台输出：</span></span><br><span class="line"><span class="comment">-----</span></span><br><span class="line"><span class="comment">student deinit</span></span><br><span class="line"><span class="comment">person deinit</span></span><br><span class="line"><span class="comment">......</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;-----&quot;</span>)</span><br><span class="line"><span class="keyword">var</span> <span class="number">_</span> = <span class="type">Student</span>()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;......&quot;</span>)</span><br></pre></td></tr></table></figure>

</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/04/Swift5-1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%BB%A7%E6%89%BF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dev.Gao">
      <meta itemprop="description" content="人类的本能是胆怯，但人类的本质是不甘心">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dev.Gao的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/04/Swift5-1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%BB%A7%E6%89%BF/" class="post-title-link" itemprop="url">Swift5学习笔记之继承</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-09-04 15:27:29" itemprop="dateCreated datePublished" datetime="2019-09-04T15:27:29+08:00">2019-09-04</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/Swift/" itemprop="url" rel="index"><span itemprop="name">Swift</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li>值类型(枚举、结构体)不支持继承，只有类支持继承</li>
<li>没有父类的类，称为：基类<ul>
<li><code>Swift</code>并没有像<code>OC</code>，<code>Java</code>那样的规定：任何类最终都要继承自某个基类</li>
</ul>
</li>
<li>子类可以重写父类的<strong>下标</strong>、<strong>方法</strong>、<strong>属性</strong>，重写必须加上<code>override</code>关键字</li>
</ul>
<h2 id="内存结构"><a href="#内存结构" class="headerlink" title="内存结构"></a>内存结构</h2><p><code>Swift</code>中，实例的内存布局：前八个字节存储<code>class</code>的<strong>类型信息</strong>，第二个八个字节存放着该实例的<strong>引用计数信息</strong>。后面的内存存放着实例的属性数据。在<code>Swift</code>中，为实例分配的字节数必须是<strong>16</strong>的倍数。</p>
<p>例如：在如下场景中，有基类<code>Animal</code>,<code>Dog</code>继承自<code>Animal</code>，<code>ErHa</code>继承自<code>Dog</code>。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> age = <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> : <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> weight = <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ErHa</span> : <span class="title">Dog</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> iq = <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Animal</code>的实例在内存中，前16个字节，分别存放着类型信息和引用计数信息，第三个八个字节存放着属性<code>age</code>的数据，攻击占24个字节。因为内存分配必须是16的倍数，所以<code>Animal</code>的一个实例会占有32个字节。</p>
<p><code>Dog</code>继承自<code>Animal</code>,前16个字节，依旧分别存放着类型信息和引用计数信息。第三个八个字节存放着从父类继承来的属性<code>age</code>的属性，第四个八个字节存放着自身<code>weight</code>属性的数据。<strong>一般来说，在内存中，从父类继承来的属性会排列在自身属性前边。</strong></p>
<p><code>ErHa</code>继承自<code>Dog</code>,前16个字节，依旧分别存放着类型信息和引用计数信息，第三个和第四个八个字节分别存放着属性<code>age</code>和<code>weight</code>的属性，第五个八个字节存放着<code>iq</code>的数据，一个实例占用40个字节，因为内存分配必须是16的倍数，所以<code>ErHa</code>的一个实例会占有48个字节。</p>
<h2 id="重写实例方法、下标"><a href="#重写实例方法、下标" class="headerlink" title="重写实例方法、下标"></a>重写实例方法、下标</h2><p>实例代码：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">speak</span><span class="params">()</span></span> &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;Aniaml speak&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">subscript</span>(index: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> index</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> anim : <span class="type">Animal</span></span><br><span class="line">anim = <span class="type">Animal</span>()</span><br><span class="line">anim.speak()</span><br><span class="line"><span class="built_in">print</span>(anim[<span class="number">6</span>])<span class="comment">//6</span></span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> : <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">speak</span><span class="params">()</span></span> &#123;</span><br><span class="line">      <span class="keyword">super</span>.speak()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Cat speak&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">     <span class="keyword">override</span> <span class="keyword">subscript</span>(index: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">super</span>[index] + <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">anim = <span class="type">Cat</span>()</span><br><span class="line">anim.speak()</span><br><span class="line"><span class="built_in">print</span>(anim[<span class="number">6</span>])<span class="comment">//7</span></span><br></pre></td></tr></table></figure>

<h2 id="重写类型方法、下标"><a href="#重写类型方法、下标" class="headerlink" title="重写类型方法、下标"></a>重写类型方法、下标</h2><ul>
<li>被<code>class</code>修饰的类型方法、下标<strong>允许</strong>被子类重写，重写后可以被<code>static</code>修饰</li>
<li>被<code>static</code>修饰的类型方法，下标<strong>不允许</strong>被子类重写</li>
</ul>
<p>示例代码：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">speak</span>() </span>&#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;Animal speak&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> : <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">speak</span><span class="params">()</span></span> &#123;</span><br><span class="line">      <span class="keyword">super</span>.speak()</span><br><span class="line">       <span class="built_in">print</span>(<span class="string">&quot;Cat speak&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="重写属性"><a href="#重写属性" class="headerlink" title="重写属性"></a>重写属性</h2><ul>
<li>子类<strong>可以</strong>将父类的属性(存储、计算)重写为<strong>计算属性</strong></li>
<li>子类<strong>不可以</strong>将父类属性重写为<strong>存储属性</strong></li>
<li>只能重写**<code>var</code><strong>属性，不能重写</strong><code>let</code>**属性</li>
<li>重写时，属性名、类型要一致</li>
<li>子类重写后属性权限<strong>不能小于</strong>父类属性的权限<ul>
<li>如果父类属性是只读的，那么子类重写后属性可以是只读的，也可以是可读写的。</li>
<li>如果父类属性是可读写的，那么子类重写后的属性也是必须可读写的。</li>
</ul>
</li>
</ul>
<h3 id="实例属性"><a href="#实例属性" class="headerlink" title="实例属性"></a>实例属性</h3><ul>
<li>子类将父类的<strong>存储属性</strong>重写为<strong>计算属性</strong>时，储存属性的内存依旧会分配，如果想要访问这段存储要使用<code>super</code>。</li>
</ul>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> radius: <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line">  <span class="keyword">var</span> diameter : <span class="type">Int</span> &#123;</span><br><span class="line">      <span class="keyword">set</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Circle setDiameter&quot;</span>)</span><br><span class="line">      radius = newValue / <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">get</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Circle getDiameter&quot;</span>)</span><br><span class="line">      <span class="keyword">return</span> radius * <span class="number">2</span></span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubCircle</span>: <span class="title">Circle</span> </span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="keyword">var</span> radius: <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">set</span> &#123;</span><br><span class="line">          <span class="built_in">print</span>(<span class="string">&quot;SubCircle setRadius&quot;</span>)</span><br><span class="line">        <span class="keyword">super</span>.radius = newValue &gt; <span class="number">0</span> ? newValue : <span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">      <span class="keyword">get</span> &#123;</span><br><span class="line">          <span class="built_in">print</span>(<span class="string">&quot;SubCircle getRadius&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.radius</span><br><span class="line">      &#125;</span><br><span class="line">     &#125;</span><br><span class="line">  <span class="keyword">override</span> <span class="keyword">var</span> diameter: <span class="type">Int</span> &#123;</span><br><span class="line">      <span class="keyword">set</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;SubCircle setDiameter&quot;</span>)</span><br><span class="line">         <span class="keyword">super</span>.diameter = newValue &gt; <span class="number">0</span> ? newValue : <span class="number">0</span></span><br><span class="line">       &#125;</span><br><span class="line">    <span class="keyword">get</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;SubCircle getDiameter&quot;</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">super</span>.diameter</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">let</span> circle = <span class="type">SubCircle</span>()</span><br><span class="line"><span class="comment">//SubCircle setRadius</span></span><br><span class="line">circle.radius = <span class="number">6</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">//SubCircle getDiameter</span></span><br><span class="line"><span class="comment">//Circle getDiameter</span></span><br><span class="line"><span class="comment">//SubCircle getRadius</span></span><br><span class="line"><span class="built_in">print</span>(circle.diameter)</span><br><span class="line">    </span><br><span class="line"><span class="comment">//SubCircle setDiameter</span></span><br><span class="line"><span class="comment">//Circle setDiameter</span></span><br><span class="line"><span class="comment">//SubCircle setRadius</span></span><br><span class="line">circle.diameter = <span class="number">20</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">//SubCircle getRadius</span></span><br><span class="line"><span class="comment">//10</span></span><br><span class="line"><span class="built_in">print</span>(circle.radius)</span><br></pre></td></tr></table></figure>

<p>对于上述实例代码中，<code>print(circle.diameter)</code>这一句</p>
<ol>
<li>会先访问<code>SubCircle.diameter.get </code>方法(输出：<code>SubCircle getDiamater</code>)</li>
<li><code>SubCircle.diameter.get</code>中调用<code>super.diameter</code>,由此又会调用<code>Circle.diamater.get</code>,输出：<code>Circle getDiameter</code></li>
<li><code>Circle.diamater.get</code>中又返回了<code>radius * 2</code>,由此调用了<code>SubCircle.radius.get</code>，输出：<code>SubCircle getRadius</code></li>
</ol>
<h3 id="类型属性"><a href="#类型属性" class="headerlink" title="类型属性"></a>类型属性</h3><ul>
<li>被<code>class</code>修饰的<strong>计算类型属性</strong>，<strong>可以</strong>被子类重写。(存储属性不能用<code>class</code>修饰)</li>
<li>被<code>static</code>修饰的<strong>类型属性（存储、计算）</strong>，<strong>不可以</strong>被子类重写。</li>
</ul>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> radius: <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">var</span> <span class="title">diameter</span>: <span class="title">Int</span> </span>&#123;</span><br><span class="line">      <span class="keyword">set</span> &#123;</span><br><span class="line">          <span class="built_in">print</span>(<span class="string">&quot;Circle setDiameter&quot;</span>)</span><br><span class="line">        radius = newValue / <span class="number">2</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">get</span> &#123;</span><br><span class="line">          <span class="built_in">print</span>(<span class="string">&quot;Circle getDiameter&quot;</span>)</span><br><span class="line">           <span class="keyword">return</span> radius * <span class="number">2</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubCircle</span> : <span class="title">Circle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">static</span> <span class="keyword">var</span> diameter: <span class="type">Int</span> &#123;</span><br><span class="line">      <span class="keyword">set</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;SubCircle setDiameter&quot;</span>)</span><br><span class="line">      radius = newValue &gt; <span class="number">0</span> ? newValue : <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">get</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;SubCircle getDiameter&quot;</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">super</span>.diameter</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="属性观察器"><a href="#属性观察器" class="headerlink" title="属性观察器"></a>属性观察器</h2><p>可以在子类中为父类属性(除了只读计算属性、<code>let</code>属性)增加属性观察器</p>
<h3 id="子类中为存储属性增加属性观察器"><a href="#子类中为存储属性增加属性观察器" class="headerlink" title="子类中为存储属性增加属性观察器"></a>子类中为存储属性增加属性观察器</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> radius: <span class="type">Int</span> = <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubCircle</span>: <span class="title">Circle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">var</span> radius: <span class="type">Int</span> &#123;</span><br><span class="line">      <span class="keyword">willSet</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;SubCircle willSetRadius&quot;</span>,newValue)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">didSet</span> &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;SubCircle didSetRadius&quot;</span>,oldValue)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> circle = <span class="type">SubCircle</span>()</span><br><span class="line"><span class="comment">//SubCircle willSetRadius 10</span></span><br><span class="line"><span class="comment">//SubCircle didSetRadius 0</span></span><br><span class="line">circle.radius = <span class="number">10</span></span><br></pre></td></tr></table></figure>

<h3 id="子类重写父类属性观察器"><a href="#子类重写父类属性观察器" class="headerlink" title="子类重写父类属性观察器"></a>子类重写父类属性观察器</h3><figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> radius: <span class="type">Int</span> = <span class="number">1</span> &#123;</span><br><span class="line">      <span class="keyword">willSet</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Circle willSetRadius &quot;</span>,newValue)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">didSet</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Circle didSetRadius &quot;</span>,oldValue)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubCircle</span>: <span class="title">Circle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">var</span> radius: <span class="type">Int</span> &#123;</span><br><span class="line">      <span class="keyword">willSet</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;SubCircle willSetRadius &quot;</span>,newValue)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">didSet</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;SubCircle didSetRadius &quot;</span>,oldValue)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> circle = <span class="type">SubCircle</span>()</span><br><span class="line"><span class="comment">//SubCircle willSetRadius  10</span></span><br><span class="line"><span class="comment">//Circle willSetRadius  10</span></span><br><span class="line"><span class="comment">//Circle didSetRadius  1</span></span><br><span class="line"><span class="comment">//SubCircle didSetRadius  1</span></span><br><span class="line">circle.radius = <span class="number">10</span></span><br></pre></td></tr></table></figure>

<ol>
<li>当给<code>cirle.radius</code>赋值时，首先先触发<code>SubCircle.radius.willSet</code>方法</li>
<li>其次会触发<code>Circle.radius.willSet</code></li>
<li>当修改完成时，会触发<code>Circle.radius.didSet</code></li>
<li>最后触发<code>SubCirlce.radius.didSet</code></li>
</ol>
<h3 id="子类为父类计算属性添加属性观察器"><a href="#子类为父类计算属性添加属性观察器" class="headerlink" title="子类为父类计算属性添加属性观察器"></a>子类为父类计算属性添加属性观察器</h3><p>在同一个类中，计算属性是无法添加属性观察器的，但是如果使用继承可以实现。(类计算属性同理)</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> radius: <span class="type">Int</span> &#123;</span><br><span class="line">      <span class="keyword">set</span> &#123;</span><br><span class="line">          <span class="built_in">print</span>(<span class="string">&quot;Circle set Radius&quot;</span>,newValue)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">get</span> &#123;</span><br><span class="line">          <span class="built_in">print</span>(<span class="string">&quot;Circle getRadius&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">20</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubCircle</span> : <span class="title">Circle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">var</span> radius: <span class="type">Int</span> &#123;</span><br><span class="line">      <span class="keyword">willSet</span> &#123;</span><br><span class="line">           <span class="built_in">print</span>(<span class="string">&quot;SubCircle willSetRadius &quot;</span>,newValue)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">didSet</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;SubCircle didSetRadius&quot;</span>,oldValue,radius)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> circle = <span class="type">SubCircle</span>()</span><br><span class="line"><span class="comment">//Circle getRadius</span></span><br><span class="line"><span class="comment">//SubCircle willSetRadius  10</span></span><br><span class="line"><span class="comment">//Circle set Radius 10</span></span><br><span class="line"><span class="comment">//Circle getRadius</span></span><br><span class="line"><span class="comment">//SubCircle didSetRadius 20 20</span></span><br><span class="line">circle.radius = <span class="number">10</span></span><br></pre></td></tr></table></figure>

<ol>
<li><p>当<code>circle.radius</code>赋值时，会先触发<code>SubCircle.radius.willSet</code>方法，但是并不是首先输出`</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class Circle &#123;</span><br><span class="line">  var radius: Int &#123;</span><br><span class="line">    set &#123;</span><br><span class="line">      print(&quot;Circle set Radius&quot;,newValue)</span><br><span class="line">    &#125;</span><br><span class="line">    get &#123;</span><br><span class="line">      print(&quot;Circle getRadius&quot;)</span><br><span class="line">      return 20</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">class SubCircle : Circle &#123;</span><br><span class="line">  override var radius: Int &#123;</span><br><span class="line">    willSet &#123;</span><br><span class="line">      print(&quot;SubCircle willSetRadius &quot;,newValue)</span><br><span class="line">    &#125;</span><br><span class="line">    didSet &#123;</span><br><span class="line">      print(&quot;SubCircle didSetRadius&quot;,oldValue,radius)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">let circle &#x3D; SubCircle()</span><br><span class="line">&#x2F;&#x2F;Circle getRadius</span><br><span class="line">&#x2F;&#x2F;SubCircle willSetRadius  10</span><br><span class="line">&#x2F;&#x2F;Circle set Radius 10</span><br><span class="line">&#x2F;&#x2F;Circle getRadius</span><br><span class="line">&#x2F;&#x2F;SubCircle didSetRadius 20 20</span><br><span class="line">circle.radius &#x3D; 10</span><br></pre></td></tr></table></figure>

<ol>
<li>当<code>circle.radius</code>赋值时，会先触发<code>SubCircle.radius.willSet</code>方法，但是并不是首先输出<code>SubCircle willSetRadius</code>，而是先输出了<code>Circle getRadius</code>。造成这样的原因是，**在执行属性观察器<code>set</code>之前会先执行计算属性的<code>get</code>方法并将之赋值给<code>oldValue</code>**。</li>
<li>赋值给<code>oldValue</code>后，随后触发子类中<code>willSet</code>方法输出<code>SubCircle willSetRadius  10</code></li>
<li><code>willSet</code>之后随即触发父类<code>set</code>方法，输出<code>Circle set Radius 10</code></li>
<li><code>set</code>方法执行后再次执行子类中<code>didSet</code>方法，但因为<code>didSet</code>中访问了<code>radius</code>属性，所以先执行父类中<code>get</code>方法。</li>
<li>最后执行了子类中<code>didSet</code>方法</li>
</ol>
</li>
</ol>
<h2 id="final关键字"><a href="#final关键字" class="headerlink" title="final关键字"></a><code>final</code>关键字</h2><ul>
<li>被<code>final</code>修饰的方法、下标、属性，禁止被重写</li>
<li>被<code>final</code>修饰的类，禁止被继承</li>
</ul>
<h2 id="Swfit实现多态的原理"><a href="#Swfit实现多态的原理" class="headerlink" title="Swfit实现多态的原理"></a><code>Swfit</code>实现多态的原理</h2><p>在<code>OC</code>中，实现多态的原理是用<code>Runtime</code>,<code>C++</code>使用的是虚函数表。</p>
<p>在<code>swift</code>中，对象实例的前八个字节存放着指向类型信息的地址(存放在全局区)。在类型信息中，重写的方法和父类的方法的内存地址会存放其中，编译期类型信息就已经确定。在运营时，实例对象调用方法，会从类型信息中，找到方法的地址进行调用。</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">speak</span><span class="params">()</span></span> &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;Animal speak&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">eat</span><span class="params">()</span></span> &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;Animal eat&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">sleep</span><span class="params">()</span></span> &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;Animal sleep&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span>: <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">speak</span><span class="params">()</span></span> &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;Dog speak&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">eat</span><span class="params">()</span></span> &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;Dog eat&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">run</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Dog run&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/2019/09/04/Swift5-1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E7%BB%A7%E6%89%BF/QQ20200906-132914.png" class="">


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/03/Swift5-1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E4%B8%8B%E6%A0%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dev.Gao">
      <meta itemprop="description" content="人类的本能是胆怯，但人类的本质是不甘心">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dev.Gao的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/03/Swift5-1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E4%B8%8B%E6%A0%87/" class="post-title-link" itemprop="url">Swift5学习笔记之下标</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-09-03 16:33:59" itemprop="dateCreated datePublished" datetime="2019-09-03T16:33:59+08:00">2019-09-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/Swift/" itemprop="url" rel="index"><span itemprop="name">Swift</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="定义和使用"><a href="#定义和使用" class="headerlink" title="定义和使用"></a>定义和使用</h2><p><strong>下标</strong>(<code>subscript</code>)可以给任意类型(枚举，结构体，类)增加下标功能，也叫做**<em>下标脚本**</em></p>
<ul>
<li><p><code>subscript</code>的语法类似于实例方法、计算属性，本质上就是方法(函数)</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> x = <span class="number">0.0</span>, y = <span class="number">0.0</span></span><br><span class="line">  <span class="keyword">subscript</span>(index: <span class="type">Int</span>) -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">      <span class="keyword">set</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> index == <span class="number">0</span> &#123;</span><br><span class="line">          x = newValue</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> index == <span class="number">1</span> &#123;</span><br><span class="line">        y = newValue</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">get</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> index == <span class="number">0</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> x</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> index == <span class="number">1</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> y</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0.0</span></span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p = <span class="type">Point</span>()</span><br><span class="line">p[<span class="number">0</span>] = <span class="number">11.1</span> <span class="comment">//调用 subscript set方法</span></span><br><span class="line">p[<span class="number">1</span>] = <span class="number">22.2</span>    <span class="comment">//调用 subscript set方法</span></span><br><span class="line"><span class="built_in">print</span>(p.x)    </span><br><span class="line"><span class="built_in">print</span>(p.y)</span><br><span class="line"><span class="built_in">print</span>(p[<span class="number">0</span>])    <span class="comment">//调用 subscript get方法</span></span><br><span class="line"><span class="built_in">print</span>(p[<span class="number">1</span>])    <span class="comment">//调用 subscript get方法</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>subscript</code>中可以定义<code>set</code>方法和<code>get</code>方法，接受的参数即为下标传入的值，<code>set</code>方法中使用<code>newValue</code>来接受设置的值</p>
</li>
<li><p><code>subscript</code>中定义的返回值类型决定了：</p>
<ul>
<li><code>get</code>方法的返回值类型</li>
<li><code>set</code>方法中<code>newValue</code>的类型</li>
</ul>
</li>
<li><p><code>subscript</code>可以接受多个参数，并且类型任意(eg:<code>String</code>)</p>
</li>
</ul>
<h2 id="下标的使用细节"><a href="#下标的使用细节" class="headerlink" title="下标的使用细节"></a>下标的使用细节</h2><ul>
<li><p><code>subscript</code>可以没有<code>set</code>方法，但必须要有<code>get</code>方法</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> x = <span class="number">10.0</span>, y = <span class="number">11.0</span></span><br><span class="line">  <span class="keyword">subscript</span>(index: <span class="type">Int</span>) -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">    <span class="keyword">get</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> index == <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> index == <span class="number">1</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> y</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">0.0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p = <span class="type">Point</span>()</span><br><span class="line"><span class="built_in">print</span>(p[<span class="number">1</span>]) <span class="comment">//11.0</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>如果只有<code>get</code>方法，可以省略<code>get</code></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> x = <span class="number">10.0</span>, y = <span class="number">11.0</span></span><br><span class="line">    <span class="keyword">subscript</span>(index: <span class="type">Int</span>) -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> index == <span class="number">0</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> x</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> index == <span class="number">1</span> &#123;</span><br><span class="line">         <span class="keyword">return</span> y</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0.0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p = <span class="type">Point</span>()</span><br><span class="line"><span class="built_in">print</span>(p[<span class="number">1</span>]) <span class="comment">//11.0</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>可以设置参数标签，外部调用使用参数标签，内部使用形参</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> x = <span class="number">0.0</span>,y = <span class="number">0.0</span></span><br><span class="line">  <span class="keyword">subscript</span>(index i: <span class="type">Int</span>) -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> i == <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> i == <span class="number">1</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> y</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0.0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p = <span class="type">Point</span>()</span><br><span class="line">p.y = <span class="number">22.2</span></span><br><span class="line"><span class="built_in">print</span>(p[index: <span class="number">1</span>])<span class="comment">//22.2</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>下标可以是类型方法，并且要使用<code>static</code>修饰</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sum</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">subscript</span>(v1: <span class="type">Int</span>, v2: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        v1 + v2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="type">Sum</span>[<span class="number">20</span>,<span class="number">11</span>])<span class="comment">//31</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="返回值为结构体、类"><a href="#返回值为结构体、类" class="headerlink" title="返回值为结构体、类"></a>返回值为结构体、类</h2><p>当下标的返回值的类型为结构体或者类时，两者有些细微的差别。譬如如下场景中：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PointManager</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> point = <span class="type">Point</span>()</span><br><span class="line">  <span class="keyword">subscript</span>(index: <span class="type">Int</span>) -&gt; <span class="type">Point</span> &#123;</span><br><span class="line">    <span class="keyword">get</span> &#123; point &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对于<code>Point</code>是不同的<code>class</code>或者<code>struct</code>类型</p>
<ul>
<li><p><code>struct</code>类型</p>
<p>此时没有<code>subscript</code>没有<code>set</code>方法，如果修改通过下标获取的<code>point</code>，此时会报错：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> x = <span class="number">0</span> ,y = <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PointManager</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> point = <span class="type">Point</span>()</span><br><span class="line">  <span class="keyword">subscript</span>(index: <span class="type">Int</span>) -&gt; <span class="type">Point</span> &#123;</span><br><span class="line">      <span class="keyword">get</span> &#123; point &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> pm = <span class="type">PointManager</span>()</span><br><span class="line">pm[<span class="number">0</span>].x = <span class="number">11</span> <span class="comment">//Cannot assign to property: subscript is get-only</span></span><br></pre></td></tr></table></figure>

<p>因为<code>struct</code>是值类型，修改其属性值<code>pm[0].x = 11</code>相当于<code>pm[0] = Point(x: 11, y: pm[0].y)</code>,所以要消除这个报错要添加<code>subscript</code>的<code>set</code>方法。</p>
</li>
<li><p><code>class</code>类型</p>
<p>对于<code>class</code>类型就没有这个问题了，因为保存在<code>PointManager</code>内的是<code>point</code>的引用，修改<code>point</code>的值并不会修改这个引用的值，无需实现<code>set</code>方法。</p>
</li>
</ul>
<h2 id="接受多个参数的下标"><a href="#接受多个参数的下标" class="headerlink" title="接受多个参数的下标"></a>接受多个参数的下标</h2><p>多个参数本身也是一种语法糖</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Gird</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> data = [</span><br><span class="line">        [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],</span><br><span class="line">        [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],</span><br><span class="line">        [<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]</span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">subscript</span>(row: <span class="type">Int</span>,column: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">set</span> &#123;</span><br><span class="line">            <span class="keyword">guard</span> row &gt;= <span class="number">0</span> &amp;&amp; row &lt; <span class="number">3</span> &amp;&amp; column &gt;= <span class="number">0</span> &amp;&amp; column &lt; <span class="number">3</span> <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            &#125;</span><br><span class="line">            data[row][column] = newValue</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">get</span> &#123;</span><br><span class="line">            <span class="keyword">guard</span> row &gt;= <span class="number">0</span> &amp;&amp; row &lt; <span class="number">3</span> &amp;&amp; column &gt;= <span class="number">0</span> &amp;&amp; column &lt; <span class="number">3</span> <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> data[row][column]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> gird = <span class="type">Gird</span>()</span><br><span class="line">gird[<span class="number">0</span>,<span class="number">1</span>] = <span class="number">77</span></span><br><span class="line">gird[<span class="number">2</span>,<span class="number">1</span>] = <span class="number">99</span></span><br><span class="line"><span class="built_in">print</span>(gird.data)</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/02/Swift5-1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E6%96%B9%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dev.Gao">
      <meta itemprop="description" content="人类的本能是胆怯，但人类的本质是不甘心">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dev.Gao的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/02/Swift5-1%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E6%96%B9%E6%B3%95/" class="post-title-link" itemprop="url">Swift5学习笔记之方法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-09-02 15:27:29" itemprop="dateCreated datePublished" datetime="2019-09-02T15:27:29+08:00">2019-09-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/Swift/" itemprop="url" rel="index"><span itemprop="name">Swift</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>枚举、结构体、类都可以定义<strong>实例方法</strong>和<strong>类型方法</strong></p>
<ul>
<li>实例方法：通过实例调用，方法中的<code>self</code>代表调用的实例</li>
<li>类型方法：通过类型调用，用<code>static</code>或者<code>class</code>关键字来定义，方法中的<code>self</code>代表类型。</li>
</ul>
<p>示例代码：</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> <span class="built_in">count</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">init</span>() &#123;</span><br><span class="line">        <span class="type">Car</span>.<span class="built_in">count</span> += <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">getCount</span><span class="params">()</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="built_in">count</span> <span class="comment">//等价于 self.count、Car.count或者Car.self.count</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> c0 = <span class="type">Car</span>()</span><br><span class="line"><span class="keyword">let</span> c1 = <span class="type">Car</span>()</span><br><span class="line"><span class="built_in">print</span>(<span class="type">Car</span>.getCount())<span class="comment">//2</span></span><br></pre></td></tr></table></figure>

<h2 id="mutating关键字"><a href="#mutating关键字" class="headerlink" title="mutating关键字"></a>mutating关键字</h2><p>结构体和枚举是<strong>值类型</strong>，默认情况下，值类型的属性不能被自身实例方法修改。修改时编译器会报错:</p>
<p><code>&#39;self&#39; is immutable</code>   {immutable:不可改变的,mutate:使改变}</p>
<p>在<code>func</code>关键字前加<code>mutating</code>可以允许这种修改行为:</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> x = <span class="number">0.0</span>,y = <span class="number">0.0</span></span><br><span class="line">  <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">moveBy</span><span class="params">(deltaX: Double,deltaY: Double)</span></span> &#123;</span><br><span class="line">      x += deltaX</span><br><span class="line">    y += deltaY</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="discardableResult"><a href="#discardableResult" class="headerlink" title="@discardableResult"></a>@discardableResult</h2><p>在<code>func</code>前面加关键字<code>@discardableResult</code>，可以消除函数调用后返回值未被使用的警告</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> x = <span class="number">0.0</span>,y = <span class="number">0.0</span></span><br><span class="line">    <span class="meta">@discardableResult</span> <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">moveBy</span><span class="params">(deltaX: Double)</span></span> -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">      x += deltaX</span><br><span class="line">    <span class="keyword">return</span> x</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p = <span class="type">Point</span>()</span><br><span class="line">p.moveBy(deltaX: <span class="number">9</span>)</span><br></pre></td></tr></table></figure>

<h2 id="将方法赋值给var-let"><a href="#将方法赋值给var-let" class="headerlink" title="将方法赋值给var/let"></a>将方法赋值给var/let</h2><p>方法可以像函数那样赋值给一个<code>let</code>或者<code>var</code></p>
<ul>
<li><p>获取实例方法(2种)</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">run</span><span class="params">(<span class="number">_</span> v: Int)</span></span> &#123; <span class="built_in">print</span>(<span class="string">&quot;func run &quot;</span>,age,v)&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//第一种，通过实例获取方法</span></span><br><span class="line"><span class="keyword">var</span> p = <span class="type">Person</span>(age: <span class="number">10</span>)</span><br><span class="line"><span class="keyword">let</span> fun1 = p.run</span><br><span class="line">fun1(<span class="number">10</span>)<span class="comment">//func run  10 10</span></span><br><span class="line"><span class="comment">//第二种通过类型获取方法，绑定实例</span></span><br><span class="line"><span class="keyword">let</span> fun2 = <span class="type">Person</span>.run <span class="comment">//fun2的类型： (Person) -&gt; ((Int) -&gt; ())</span></span><br><span class="line"><span class="keyword">let</span> fun3 = fun2(p) <span class="comment">//绑定实例，获取实例方法</span></span><br><span class="line">fun3(<span class="number">15</span>) <span class="comment">//func run  10 15</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>获取类型方法</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">run</span><span class="params">(<span class="number">_</span> v: Int)</span></span> &#123; <span class="built_in">print</span>(<span class="string">&quot;static func run &quot;</span>,v)&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> fun = <span class="type">Person</span>.run</span><br><span class="line">fun(<span class="number">20</span>)<span class="comment">//static func run  20</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>假如存在同名的实例方法和类型方法</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> age: <span class="type">Int</span></span><br><span class="line">      <span class="function"><span class="keyword">func</span> <span class="title">run</span><span class="params">(<span class="number">_</span> v: Int)</span></span> &#123; <span class="built_in">print</span>(<span class="string">&quot;func run &quot;</span>,age,v)&#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">run</span><span class="params">(<span class="number">_</span> v: Int)</span></span> &#123; <span class="built_in">print</span>(<span class="string">&quot;static func run &quot;</span>,v)&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> fun = <span class="type">Person</span>.run <span class="comment">//默认会获取类型方法</span></span><br><span class="line"><span class="comment">//如果想通过Person.run获取实例方法，则需要指定变量的类型</span></span><br><span class="line"><span class="keyword">let</span> fun1 : (<span class="type">Person</span>) -&gt; ((<span class="type">Int</span>) -&gt; ()) = <span class="type">Person</span>.run</span><br><span class="line"><span class="keyword">let</span> fun2 = fun1(<span class="type">Person</span>(age: <span class="number">10</span>)) <span class="comment">//绑定实例，获取实例方法</span></span><br><span class="line">fun2(<span class="number">10</span>) <span class="comment">//func run  10 10</span></span><br></pre></td></tr></table></figure>



</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/30/CSS%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%86%8D%E5%85%A5%E9%97%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dev.Gao">
      <meta itemprop="description" content="人类的本能是胆怯，但人类的本质是不甘心">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dev.Gao的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/30/CSS%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%86%8D%E5%85%A5%E9%97%A8/" class="post-title-link" itemprop="url">CSS从入门到再入门</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-11-30 14:41:06" itemprop="dateCreated datePublished" datetime="2018-11-30T14:41:06+08:00">2018-11-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>前面粗略的学习了HTML标签，进入CSS阶段的学习了。题目之所以叫从入门到再入门也是因为之前学习的时候因为没有找到CSS的学习方法，一味死记硬背。工作后也不怎么常用，学过的CSS都还给大学老师了😢。在此记录一下学习的CSS再入门的过程💪。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2018/11/30/CSS%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%86%8D%E5%85%A5%E9%97%A8/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/26/HTML%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dev.Gao">
      <meta itemprop="description" content="人类的本能是胆怯，但人类的本质是不甘心">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dev.Gao的学习笔记">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/11/26/HTML%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/" class="post-title-link" itemprop="url">HTML朝花夕拾</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-11-26 14:41:06" itemprop="dateCreated datePublished" datetime="2018-11-26T14:41:06+08:00">2018-11-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>之前学习前端的只是还是在大学用Java Web做课设的时候。那个时候对于前端的只是也是学习了一些皮毛中的皮毛，没有系统性的整理过这些东西。后来毕业了就从事了移动端开发的工作，接触前端的机会也是少之又少。最近几年RN,Weex,Flutter等等这些移动端跨平台框架的兴起，前端进入了<strong>Web2.0</strong>时代。</p>
<p>了解到RN也是从前端框架React逐步演化过来，是在移动端的原生实现。为了学习RN也不得不补习一下前端知识。用以此文来记录我的HTML学习之路。</p>
<h2 id="HTML语法规范"><a href="#HTML语法规范" class="headerlink" title="HTML语法规范"></a>HTML语法规范</h2><ul>
<li><code>HTML</code>标签通常是成对出现的，称之为<strong>双标签</strong>。包含开始标签和结束标签，例如<code>&lt;html&gt; &lt;/html&gt;</code>。</li>
<li>当然也有少数的<strong>单标签</strong>,例如<code>&lt;br /&gt;</code>。</li>
</ul>
<h3 id="HTML标签关系"><a href="#HTML标签关系" class="headerlink" title="HTML标签关系"></a>HTML标签关系</h3><ul>
<li><p>双标签关系分为：<strong>包含关系</strong>和<strong>并列关系</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- head和body标签是包含关系，head和title是并列关系 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello world<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="HTML-基本结构"><a href="#HTML-基本结构" class="headerlink" title="HTML 基本结构"></a>HTML 基本结构</h2><p>HTML文档的基本结构为：</p>
<img src="/2018/11/26/HTML%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/WX20201126-151557.png" class="">

<p>在开发工具还会自动声明几个标签：</p>
<ul>
<li><code>&lt;!DOCTYPE html&gt;</code> 文档类型声明标签，来告诉浏览器这个页面采用<code>html5</code>版本来显示页面</li>
<li><code>&lt;html lang=&quot;en&quot;&gt;</code>，声明文档语言类型，面向浏览器和搜索引擎</li>
<li><code>&lt;meta charset=&quot;UTF-8&quot;&gt;</code> 必须写，采取UTF-8来保存文字，<strong>如果不写就会乱码</strong>。常用的字符集有<code>GB2312</code>(简体中文)、<code>BIG5</code>(繁体中文)、<code>GBK</code>(简体中文和繁体中文)。</li>
</ul>
<h2 id="文本处理标签"><a href="#文本处理标签" class="headerlink" title="文本处理标签"></a>文本处理标签</h2><h3 id="标题标签"><a href="#标题标签" class="headerlink" title="标题标签"></a>标题标签</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>,<span class="tag">&lt;<span class="name">h2</span>&gt;</span>,<span class="tag">&lt;<span class="name">h3</span>&gt;</span>,<span class="tag">&lt;<span class="name">h4</span>&gt;</span>,<span class="tag">&lt;<span class="name">h5</span>&gt;</span>,<span class="tag">&lt;<span class="name">h6</span>&gt;</span>,其中<span class="tag">&lt;<span class="name">h1</span>&gt;</span>最大，大小逐个递减</span><br></pre></td></tr></table></figure>

<h3 id="段落标题"><a href="#段落标题" class="headerlink" title="段落标题"></a>段落标题</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--- 单词 paragraph的缩写，意为段落。 ---&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>特点：</p>
<ol>
<li>文本在一个段落中会根据浏览器窗口的大小自动换行</li>
<li>段落和段落间保有空隙</li>
</ol>
<h3 id="换行标签："><a href="#换行标签：" class="headerlink" title="换行标签："></a>换行标签：</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--- 单词 break 的缩写，意为打断、换行 ---&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>特点：</p>
<ol>
<li>单标签</li>
<li><code>&lt;br /&gt;</code>标签只是简单地开始新的一行，跟段落不一样，段落之间会插入一些垂直的间距</li>
</ol>
<h3 id="文本格式化标签"><a href="#文本格式化标签" class="headerlink" title="文本格式化标签"></a>文本格式化标签</h3><table>
<thead>
<tr>
<th align="center">语义</th>
<th align="center">标签</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">加粗</td>
<td align="center"><code>&lt;strong&gt;&lt;/strong&gt;</code>或<code>&lt;b&gt;&lt;/b&gt;</code></td>
<td align="center">更推荐使用<code>&lt;strong&gt;</code></td>
</tr>
<tr>
<td align="center">倾斜</td>
<td align="center"><code>&lt;em&gt;&lt;/em&gt;</code>或<code>&lt;i&gt;&lt;/i&gt;</code></td>
<td align="center">更推荐使用<code>&lt;em&gt;</code></td>
</tr>
<tr>
<td align="center">删除线</td>
<td align="center"><code>&lt;del&gt;&lt;/del&gt;或&lt;s&gt;&lt;/s&gt;</code></td>
<td align="center">更推荐使用<code>&lt;del&gt;</code></td>
</tr>
<tr>
<td align="center">下划线</td>
<td align="center"><code>&lt;ins&gt;&lt;/ins&gt;</code>或<code>&lt;u&gt;&lt;/u&gt;</code></td>
<td align="center">更推荐使用<code>ins</code></td>
</tr>
</tbody></table>
<h3 id="div和span标签"><a href="#div和span标签" class="headerlink" title="div和span标签"></a>div和span标签</h3><p><code>&lt;div&gt;</code>和<code>&lt;span&gt;</code>是没有语义的，是一个布局容器。</p>
<p>div是division的缩写，表示分割、分区。span意为跨度、跨距</p>
<p>特点：</p>
<ol>
<li><code>&lt;div&gt;</code>标签用来布局，会独占一行</li>
<li><code>&lt;span&gt;</code>标签用来布局，一行上可以多个<code>&lt;span&gt;</code></li>
</ol>
<h2 id="图像标签"><a href="#图像标签" class="headerlink" title="图像标签"></a>图像标签</h2><p>在HTML标签中，<code>&lt;img&gt;</code>标签用于定义HTML页面中的图像</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;图像URL&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>src</code>属性是<code>&lt;img&gt;</code>标签的<strong>必须属性</strong>，用于指定图像文件的路径和文件名。属性列表参见如下：</p>
<table>
<thead>
<tr>
<th align="center">属性</th>
<th align="center">属性值</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">src</td>
<td align="center">图片路径</td>
<td align="center">必须属性</td>
</tr>
<tr>
<td align="center">alt</td>
<td align="center">文本</td>
<td align="center">替换文本，图片不能显示时展示的文字</td>
</tr>
<tr>
<td align="center">title</td>
<td align="center">文本</td>
<td align="center">提示文本，鼠标放到图像上，显示的文字</td>
</tr>
<tr>
<td align="center">width</td>
<td align="center">像素</td>
<td align="center">设置图片的宽度，如果不设置高度，图片的高度会等比例缩放</td>
</tr>
<tr>
<td align="center">height</td>
<td align="center">像素</td>
<td align="center">设置图片的高度，如果不设置宽度，图片的宽度会等比例缩放</td>
</tr>
<tr>
<td align="center">border</td>
<td align="center">像素</td>
<td align="center">设置边框宽度</td>
</tr>
</tbody></table>
<h2 id="文件引用的路径"><a href="#文件引用的路径" class="headerlink" title="文件引用的路径"></a>文件引用的路径</h2><h3 id="相对路径"><a href="#相对路径" class="headerlink" title="相对路径"></a>相对路径</h3><p>相对路径:以引用文件所在位置为参考基础，而建立出的目录路径。以图片相对于 HTML 页面的位置来看。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 同一级路径 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;jst.jpg&quot;</span> &gt;</span></span><br><span class="line">        </span><br><span class="line"><span class="comment">&lt;!-- 下一级路径 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/jst.jpg&quot;</span> &gt;</span></span><br><span class="line">        </span><br><span class="line"><span class="comment">&lt;!-- 上一级路径 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../images/jst.jpg&quot;</span> &gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="绝对路径"><a href="#绝对路径" class="headerlink" title="绝对路径"></a>绝对路径</h3><p>绝对路径:是指目录下的绝对位置，直接到达目标位置，通常是从盘符开始的路径。</p>
<p>例如，“D:\web\img\logo.gif”或完整的网络地址“<a target="_blank" rel="noopener" href="http://www.xxx.com/images/logo.jpg">http://www.xxx.com/images/logo.jpg</a> ”。</p>
<h2 id="超链接"><a href="#超链接" class="headerlink" title="超链接"></a>超链接</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 单词 anchor 的缩写，意为:锚。 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.baidu.com&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>百度一下<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>属性</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>href</td>
<td>用于指定链接目标的url地址，必须属性。</td>
</tr>
<tr>
<td>target</td>
<td>用于指定链接页面的打开方式，默认值：<code>_self</code>，从当前页面打开页面；<code>_blank</code>:在新窗口打开</td>
</tr>
</tbody></table>
<h3 id="链接分类"><a href="#链接分类" class="headerlink" title="链接分类"></a>链接分类</h3><ul>
<li>外部链接，例如: <code>&lt;a href=&quot;https://www.baidu.com/&quot;&gt;百度&lt;/a&gt;</code></li>
<li>内部链接，网站内部页面，例如：<code>&lt;a href=&quot;index.html&quot;&gt;首页&lt;/a&gt;</code></li>
<li>空连接，如果当时没有确定链接目标时使用<code>#</code>,例如：<code>&lt;a href=&quot;#&quot;&gt;首页&lt;/a&gt;</code></li>
<li>下载链接，如果href里面地址是一个文件或压缩包，会下载这个文件</li>
<li>网页元素链接：网页中的元素（文本、图像、表格、音频、视频）都可以添加超链接</li>
<li>锚点链接：点击链接可以快速定位到页面中的某个位置<ul>
<li>在链接文本的href属性中，设置属性值为**#名字**的形式，如<code>&lt;a href=&quot;#two&quot;&gt;第2级&lt;/a&gt;</code></li>
<li>目标位置标签id属性设置为刚才的名字，如：<code>&lt;h3 id=&quot;two&quot;&gt;第2级介绍&lt;/h3&gt;</code></li>
</ul>
</li>
</ul>
<h2 id="表格标签"><a href="#表格标签" class="headerlink" title="表格标签"></a>表格标签</h2><ol>
<li><code>&lt;table&gt;&lt;/table&gt;</code>用于定义表格的标签。</li>
<li><code>&lt;tr&gt;&lt;tr&gt;</code>标签用于定义表格中的行，是<code>table row</code>的缩写，必须嵌套在<code>&lt;table&gt;&lt;/table&gt;</code>标签中。</li>
<li><code>&lt;td&gt;&lt;/td&gt;</code>用于定义表格中的单元格，是<code>table data</code>的缩写，即数据单元格的内容，必须嵌套在<code>tr</code>标签中。</li>
<li><code>&lt;th&gt;&lt;/th&gt;</code>用于定义表格中的表头单元格，是<code>table head</code>的缩写，一般位于表格的第一行或第一列，表头单元格里面的文本内容加粗居中显示。</li>
</ol>
<h3 id="表格常用的属性值"><a href="#表格常用的属性值" class="headerlink" title="表格常用的属性值"></a>表格常用的属性值</h3><p><strong><em>注：一下属性值要添加到table标签上</em></strong></p>
<table>
<thead>
<tr>
<th align="center">属性名</th>
<th align="center">属性值</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">align</td>
<td align="center">left、center、right</td>
<td align="center">规定表格相对周围元素的对齐方式</td>
</tr>
<tr>
<td align="center">border</td>
<td align="center">1或””</td>
<td align="center">规定表格单元是否拥有边框，默认为””，表示没边框</td>
</tr>
<tr>
<td align="center">cellpadding</td>
<td align="center">像素值</td>
<td align="center">规定单元边沿与其内容之间的空白，默认1像素(内边距)</td>
</tr>
<tr>
<td align="center">cellspacing</td>
<td align="center">像素值</td>
<td align="center">规定单元格之间的空白，默认2像素，(外边距)</td>
</tr>
<tr>
<td align="center">width</td>
<td align="center">像素值或百分比</td>
<td align="center">规定单元格的宽度</td>
</tr>
<tr>
<td align="center">height</td>
<td align="center">像素值或百分比</td>
<td align="center">规定单元格的高度</td>
</tr>
</tbody></table>
<img src="/2018/11/26/HTML%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/WX20201130-155959.png" class="" title="This is an example image">

<h3 id="表格结构化标签"><a href="#表格结构化标签" class="headerlink" title="表格结构化标签"></a>表格结构化标签</h3><p>使用结构话标签，这样语义和可读性都更强。thead定义表头，tbody定义主体，数据本体</p>
<ol>
<li><code>&lt;thead&gt;&lt;/thead&gt;</code>：用于定义表格头部，一般内部嵌套<code>&lt;tr&gt;</code>标签，位于第一行。</li>
<li><code>&lt;tbody&gt;&lt;/tbody&gt;</code>：用于定义表格主体，主要用于放数据本体。</li>
<li>以上标签都是放在<code>&lt;table&gt;&lt;/table&gt;</code>标签内。</li>
</ol>
<img src="/2018/11/26/HTML%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/WX20201130-172426.png" class="" title="This is an example image">

<h3 id="合并单元格"><a href="#合并单元格" class="headerlink" title="合并单元格"></a>合并单元格</h3><p>为了满足更灵活的表格需求，可以对单元格进行合并，合并的方式分为：</p>
<ul>
<li><p>跨行合并：<code>rowspan=&quot;合并单元格的个数&quot;</code></p>
</li>
<li><p>跨列合并：<code>colspan=&quot;合并单元格的个数&quot;</code></p>
</li>
</ul>
<p>确定了合并的方式，那么如何确定哪个单元格写合并代码呢？</p>
<ul>
<li>跨行：最上层单元格个目标单元格，写合并代码</li>
<li>跨列：最左侧单元格为目标单元格，写合并代码</li>
</ul>
<p>总结为: 按照人类的书写方式(从上到下，从左到右)最先遇到的单元格来写合并代码</p>
<h3 id="合并单元格三部曲"><a href="#合并单元格三部曲" class="headerlink" title="合并单元格三部曲"></a>合并单元格三部曲</h3><ol>
<li>先确定合并方式(跨行还是跨列)</li>
<li>找到目标单元格，写上合并方式 = 合并单元格数量。比如：<code>&lt;td colspan=&quot;2&quot;&gt;&lt;/td&gt;</code></li>
<li>删除多余单元格</li>
</ol>
<p>实例：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span> <span class="attr">cellpadding</span>=<span class="string">&quot;20&quot;</span> <span class="attr">cellspacing</span>=<span class="string">&quot;0&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">th</span> <span class="attr">colspan</span>=<span class="string">&quot;6&quot;</span>&gt;</span>个人简历<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>姓名：<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>性别：<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">rowspan</span>=<span class="string">&quot;4&quot;</span> <span class="attr">colspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span>照片<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>婚姻状况：<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>出生年月：<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>民族：<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>政治面貌：<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>身高：<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>学历：<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>

  <img src="/2018/11/26/HTML%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/WX20201130-175146.png" class="" title="This is an example image">

<h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><p>列表最大的特点就是整齐、整洁、有序，它作为布局会更加自由和方便。</p>
<p>根据使用情景不同，列表可以分为三大类：无序列表、有序列表和自定义列表</p>
<h3 id="无序列表"><a href="#无序列表" class="headerlink" title="无序列表"></a>无序列表</h3><p><code>&lt;ul&gt;</code>标签表示HTML页面中的无序列表，而列表项使用<code>&lt;li&gt;</code>标签定义。</p>
<ul>
<li>无序列表的各个列表项之间没有顺序级别之分，是并列的。</li>
<li>ul中只能嵌套li,其他标签和文字是不允许的。</li>
<li><strong>li标签相当于一个容器，可以容纳所有元素</strong></li>
<li>无序列表会带有自己的样式属性（列表项带有黑色圆圈），实际使用时，会使用CSS来设置。  </li>
</ul>
<img src="/2018/11/26/HTML%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/WX20201130-183928.png" class="" title="This is an example image">

<h3 id="有序列表"><a href="#有序列表" class="headerlink" title="有序列表"></a>有序列表</h3><p><code>&lt;ol&gt;</code>标签表示HTML页面中的无序列表，而列表项使用<code>&lt;li&gt;</code>标签定义。</p>
<ul>
<li><code>&lt;ol&gt;</code>中只能嵌套<code>&lt;li&gt;</code></li>
<li><strong>li标签相当于一个容器，可以容纳所有元素</strong></li>
<li>有序列表会带有自己的样式属性（列表项带有序号），实际使用时，会使用CSS来设置。  </li>
</ul>
<img src="/2018/11/26/HTML%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/WX20201130-184503.png" class="" title="This is an example image">

<h3 id="自定义列表"><a href="#自定义列表" class="headerlink" title="自定义列表"></a>自定义列表</h3><p>自定义列表常用与对术语或名词进行解释和描述，定义列表的列表项前没有任何项目符号。例如：</p>
<img src="/2018/11/26/HTML%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/WX20201130-185045.png" class="" title="This is an example image">

<p><code>&lt;dl&gt;</code>标签用于定义描述列表(或定义列表)，该标签会与<code>&lt;dt&gt;</code>(定义项目/名字)和<code>&lt;dd&gt;</code>(描述每一个项目/名字)一起使用</p>
<img src="/2018/11/26/HTML%E6%9C%9D%E8%8A%B1%E5%A4%95%E6%8B%BE/WX20201130-185516.png" class="" title="This is an example image">

<ul>
<li><code>&lt;dl&gt;&lt;/dl&gt;</code>里面包含<code>&lt;dt&gt;</code>和<code>&lt;dd&gt;</code></li>
<li><code>&lt;dt&gt;</code>和<code>&lt;dd&gt;</code>个数没有限制，经常是一个<code>&lt;dt&gt;</code>对应多个<code>&lt;dd&gt;</code></li>
</ul>
<h2 id="表单"><a href="#表单" class="headerlink" title="表单"></a>表单</h2><p>在HTML文档中，一个完整的表单通常由<strong>表单域</strong>、<strong>表单控件（表单元素）</strong>和<strong>提示信息</strong>3个部分构成。</p>
<h3 id="表单域"><a href="#表单域" class="headerlink" title="表单域"></a>表单域</h3><p>表单域是一个包含表单元素的区域。在 HTML 标签中， &lt;form&gt; 标签用于定义表单域。其重用的属性：</p>
<table>
<thead>
<tr>
<th align="center">属性</th>
<th align="center">属性值</th>
<th align="center">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center">action</td>
<td align="center">url地址</td>
<td align="center">用于指定接收并处理表单数据的服务器程序url地址</td>
</tr>
<tr>
<td align="center">method</td>
<td align="center">get/post</td>
<td align="center">用于设置表单数据的提交方式，其取值为get或post</td>
</tr>
<tr>
<td align="center">name</td>
<td align="center">名称</td>
<td align="center">用于指定表单的名称，以区分同一个页面中的多个表单域</td>
</tr>
</tbody></table>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;xxx.php&quot;</span> <span class="attr">method</span>=<span class="string">&quot;GET&quot;</span> <span class="attr">name</span>=<span class="string">&quot;reg&quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="表单控件"><a href="#表单控件" class="headerlink" title="表单控件"></a>表单控件</h3><p>其中表单元素主要分为3种，input输入表单元素，select下拉表单元素，textarea文本域元素</p>
<h4 id="lt-input-gt-表单元素"><a href="#lt-input-gt-表单元素" class="headerlink" title="&lt;input&gt;表单元素"></a>&lt;input&gt;表单元素</h4><p>在input标签中，包含一个type属性值，输入字段拥有很多形式：文本，复选框，掩码输入，单选按钮，按钮</p>
<table>
<thead>
<tr>
<th align="center">属性值</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">button</td>
<td align="center">定义可点击按钮(多数情况下，用于通过JavaScript启动脚本)。</td>
</tr>
<tr>
<td align="center">checkbox</td>
<td align="center">定义复选框</td>
</tr>
<tr>
<td align="center">file</td>
<td align="center">定义输入字段和”浏览”按钮，供文件上传</td>
</tr>
<tr>
<td align="center">hidden</td>
<td align="center">定义隐藏的输入字段</td>
</tr>
<tr>
<td align="center">image</td>
<td align="center">定义图像形式的提交按钮</td>
</tr>
<tr>
<td align="center">password</td>
<td align="center">定义密码字段。该字段中的字符被掩码</td>
</tr>
<tr>
<td align="center">radio</td>
<td align="center">定义单选按钮</td>
</tr>
<tr>
<td align="center">reset</td>
<td align="center">定义重置按钮，重置按钮会清楚表单中的所有数据</td>
</tr>
<tr>
<td align="center">submit</td>
<td align="center">定义提交按钮，提交按钮会把表单数据发送到服务端</td>
</tr>
<tr>
<td align="center">text</td>
<td align="center">定义单行的输入字段，用户可在其中输入文本，迷人宽度为20个字符。</td>
</tr>
</tbody></table>
<ul>
<li><p>文本类: text、password</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;xxx.php&quot;</span> <span class="attr">method</span>=<span class="string">&quot;GET&quot;</span> <span class="attr">name</span>=<span class="string">&quot;reg&quot;</span>&gt;</span></span><br><span class="line">        用户名： <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>多选框、单选框</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;xxx.php&quot;</span> <span class="attr">method</span>=<span class="string">&quot;GET&quot;</span> <span class="attr">name</span>=<span class="string">&quot;reg&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 单选框需要指定同一个name值才能实现单选的效果 --&gt;</span></span><br><span class="line">  性别：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span>&gt;</span> 男 <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span>&gt;</span> 女 <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 多选框 --&gt;</span></span><br><span class="line">  爱好：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span>&gt;</span> 抽烟 <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span>&gt;</span> 喝酒 <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span>&gt;</span> 打牌</span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>按钮类</p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Dev.Gao</p>
  <div class="site-description" itemprop="description">人类的本能是胆怯，但人类的本质是不甘心</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">52</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Dev.Gao</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
